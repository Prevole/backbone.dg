<!DOCTYPE html>  <html> <head>   <title>ajadmin.dg.coffee</title>   <meta http-equiv="content-type" content="text/html; charset=UTF-8">   <link rel="stylesheet" media="all" href="docco.css" /> </head> <body>   <div id="container">     <div id="background"></div>          <table cellpadding="0" cellspacing="0">       <thead>         <tr>           <th class="docs">             <h1>               ajadmin.dg.coffee             </h1>           </th>           <th class="code">           </th>         </tr>       </thead>       <tbody>                               <tr id="section-1">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-1">&#182;</a>               </div>                            </td>             <td class="code">               <div class="highlight"><pre><span class="nv">Backbone.Dg = Dg = </span><span class="p">(</span> <span class="nf">(Backbone, Marionette, _, $) -&gt;</span>
  <span class="nv">Dg = </span><span class="p">{</span> <span class="nv">version: </span><span class="s">&quot;0.0.1&quot;</span> <span class="p">}</span></pre></div>             </td>           </tr>                               <tr id="section-2">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-2">&#182;</a>               </div>               <p>In the same idea of _.defaults(object, *defaults), this function
will recurse the object structure to use defaults values at any
depth of the object.
@param [Object] object The objet to get the overriden values
@param [Object] defs Defaults to apply when no value is provided
@return [Object] Object enriched</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nv">defaults = </span><span class="nf">(object, defs) -&gt;</span></pre></div>             </td>           </tr>                               <tr id="section-3">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-3">&#182;</a>               </div>               <p>Empty object if none provided</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nv">object = </span><span class="p">{}</span> <span class="k">if</span> <span class="nx">object</span> <span class="o">is</span> <span class="kc">undefined</span>
  </pre></div>             </td>           </tr>                               <tr id="section-4">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-4">&#182;</a>               </div>               <p>For each pair of key/value from the defaults</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="k">for</span> <span class="nx">key</span><span class="p">,</span> <span class="nx">value</span> <span class="k">of</span> <span class="nx">defs</span></pre></div>             </td>           </tr>                               <tr id="section-5">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-5">&#182;</a>               </div>               <p>Check if the object key is defined or null</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="k">if</span> <span class="nx">object</span><span class="p">[</span><span class="nx">key</span><span class="p">]</span> <span class="o">is</span> <span class="kc">undefined</span> <span class="o">or</span> <span class="nx">object</span><span class="p">[</span><span class="nx">key</span><span class="p">]</span> <span class="o">==</span> <span class="kc">null</span>
        <span class="nx">object</span><span class="p">[</span><span class="nx">key</span><span class="p">]</span> <span class="o">=</span> <span class="nx">defs</span><span class="p">[</span><span class="nx">key</span><span class="p">]</span>
  </pre></div>             </td>           </tr>                               <tr id="section-6">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-6">&#182;</a>               </div>               <p>Check if the default and object value are objects</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="k">else</span> <span class="k">if</span> <span class="nx">_</span><span class="p">.</span><span class="nx">isObject</span><span class="p">(</span><span class="nx">defs</span><span class="p">[</span><span class="nx">key</span><span class="p">])</span> <span class="o">and</span> <span class="nx">_</span><span class="p">.</span><span class="nx">isObject</span><span class="p">(</span><span class="nx">object</span><span class="p">[</span><span class="nx">key</span><span class="p">])</span>
        <span class="nx">object</span><span class="p">[</span><span class="nx">key</span><span class="p">]</span> <span class="o">=</span> <span class="nx">defaults</span><span class="p">(</span><span class="nx">object</span><span class="p">[</span><span class="nx">key</span><span class="p">],</span> <span class="nx">defs</span><span class="p">[</span><span class="nx">key</span><span class="p">])</span>
  
    <span class="nx">object</span>
  </pre></div>             </td>           </tr>                               <tr id="section-7">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-7">&#182;</a>               </div>               <p>Like _.reject(list, iterator, [context]), this function reject entries
that satisfies the iterator function.
@param [Object] object The objet that contains entries to reject
@param [Function] filter The function that decides if an entry is rejected or not
@return [Object] Object filtered</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nv">reject = </span><span class="nf">(object, filter) -&gt;</span>
    <span class="nv">newObject = </span><span class="p">{}</span>
  </pre></div>             </td>           </tr>                               <tr id="section-8">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-8">&#182;</a>               </div>               <p>Check each key/value of the object</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="k">for</span> <span class="nx">key</span><span class="p">,</span> <span class="nx">value</span> <span class="k">of</span> <span class="nx">object</span></pre></div>             </td>           </tr>                               <tr id="section-9">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-9">&#182;</a>               </div>               <p>Keep entries only if filter is not satisfied</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="nx">unless</span> <span class="nx">filter</span><span class="p">(</span><span class="nx">object</span><span class="p">,</span> <span class="nx">key</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span>
        <span class="nx">newObject</span><span class="p">[</span><span class="nx">key</span><span class="p">]</span> <span class="o">=</span> <span class="nx">value</span>
  </pre></div>             </td>           </tr>                               <tr id="section-10">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-10">&#182;</a>               </div>               <p>Object filtered</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">newObject</span>
  <span class="nv">templates =</span>
    <span class="nv">empty: </span><span class="nf">(data) -&gt;</span>
      <span class="s">&quot;&lt;td class=&#39;empty&#39;&gt;No Data&lt;/td&gt;&quot;</span>
  
    <span class="nv">grid: </span><span class="nf">(data) -&gt;</span>
      <span class="s">&quot;&lt;div class=&#39;dgGrid&#39;&gt;&quot;</span> <span class="o">+</span>
        <span class="s">&quot;&lt;div class=&#39;clearfix&#39;&gt;&quot;</span> <span class="o">+</span>
          <span class="s">&quot;&lt;div class=&#39;dgPerPage&#39; /&gt;&quot;</span> <span class="o">+</span>
          <span class="s">&quot;&lt;div class=&#39;dgToolbar&#39; /&gt;&quot;</span> <span class="o">+</span>
          <span class="s">&quot;&lt;div class=&#39;dgQuickSearch&#39; /&gt;&quot;</span> <span class="o">+</span>
        <span class="s">&quot;&lt;/div&gt;&quot;</span> <span class="o">+</span>
        <span class="s">&quot;&lt;div class=&#39;dgTable&#39; /&gt;&quot;</span> <span class="o">+</span>
        <span class="s">&quot;&lt;div class=&#39;clearfix&#39;&gt;&quot;</span> <span class="o">+</span>
          <span class="s">&quot;&lt;div class=&#39;dgInfo pull-left&#39; /&gt;&quot;</span> <span class="o">+</span>
          <span class="s">&quot;&lt;div class=&#39;dgPager pull-right&#39; /&gt;&quot;</span> <span class="o">+</span>
        <span class="s">&quot;&lt;/div&gt;&quot;</span> <span class="o">+</span>
      <span class="s">&quot;&lt;/div&gt;&quot;</span>
  
    <span class="nv">gridempty: </span><span class="nf">(data) -&gt;</span>
      <span class="s">&quot;&lt;div class=&#39;dgLoading&#39;&gt;&quot;</span> <span class="o">+</span>
        <span class="s">&quot;&lt;div class=&#39;progress progress-striped active&#39;&gt;&quot;</span> <span class="o">+</span>
          <span class="s">&quot;&lt;div class=&#39;bar&#39; style=&#39;width:100%&#39;&gt;Loading data&lt;/div&gt;&quot;</span> <span class="o">+</span>
        <span class="s">&quot;&lt;/div&gt;&quot;</span> <span class="o">+</span>
      <span class="s">&quot;&lt;/div&gt;&quot;</span>
  
    <span class="nv">info: </span><span class="nf">(data) -&gt;</span>
      <span class="s">&quot;&lt;span class=&#39;info&#39; /&gt;&quot;</span>
  
    <span class="nv">pager: </span><span class="nf">(data) -&gt;</span>
      <span class="s">&quot;&lt;div class=&#39;pagination pagination-right&#39; /&gt;&quot;</span>
  
    <span class="nv">perpage: </span><span class="nf">(data) -&gt;</span>
      <span class="s">&quot;&lt;div class=&#39;form-inline pull-left&#39;&gt;&quot;</span> <span class="o">+</span>
        <span class="s">&quot;&lt;label class=&#39;checkbox&#39;&gt;Item per page: &lt;/label&gt;&quot;</span> <span class="o">+</span>
        <span class="s">&quot;&lt;select class=&#39;per-page input-mini&#39;&gt;&quot;</span> <span class="o">+</span>
          <span class="s">&quot;&lt;option&gt;2&lt;/option&gt;&quot;</span> <span class="o">+</span>
          <span class="s">&quot;&lt;option&gt;5&lt;/option&gt;&quot;</span> <span class="o">+</span>
          <span class="s">&quot;&lt;option&gt;10&lt;/option&gt;&quot;</span> <span class="o">+</span>
          <span class="s">&quot;&lt;option&gt;25&lt;/option&gt;&quot;</span> <span class="o">+</span>
          <span class="s">&quot;&lt;option&gt;50&lt;/option&gt;&quot;</span> <span class="o">+</span>
          <span class="s">&quot;&lt;option&gt;100&lt;/option&gt;&quot;</span> <span class="o">+</span>
        <span class="s">&quot;&lt;/select&gt;&quot;</span> <span class="o">+</span>
      <span class="s">&quot;&lt;/div&gt;&quot;</span>
  
    <span class="nv">quicksearch: </span><span class="nf">(data) -&gt;</span>
      <span class="s">&quot;&lt;div class=&#39;form-inline pull-right qs&#39;&gt;&quot;</span> <span class="o">+</span>
        <span class="s">&quot;&lt;label class=&#39;checkbox&#39;&gt;Quick search: &lt;/label&gt;&quot;</span> <span class="o">+</span>
        <span class="s">&quot;&lt;input type=&#39;text&#39; /&gt;&quot;</span> <span class="o">+</span>
      <span class="s">&quot;&lt;/div&gt;&quot;</span>
  
    <span class="nv">table: </span><span class="nf">(data) -&gt;</span>
      <span class="s">&quot;&lt;table class=&#39;table table-striped table-hover table-condensed&#39;&gt;&quot;</span> <span class="o">+</span>
        <span class="s">&quot;&lt;tbody/&gt;&quot;</span> <span class="o">+</span>
      <span class="s">&quot;&lt;/table&gt;&quot;</span>
  
    <span class="nv">toolbar: </span><span class="nf">(data) -&gt;</span>
      <span class="s">&quot;&lt;div class=&#39;form-inline pull-right buttons btn-group&#39;&gt;&quot;</span> <span class="o">+</span>
        <span class="s">&quot;&lt;button class=&#39;btn refresh&#39;&gt;&quot;</span> <span class="o">+</span>
          <span class="s">&quot;&lt;i class=&#39;icon-refresh&#39;/&gt;&quot;</span> <span class="o">+</span>
        <span class="s">&quot;&lt;/button&gt;&quot;</span> <span class="o">+</span>
        <span class="s">&quot;&lt;button class=&#39;btn create&#39;&gt;&quot;</span> <span class="o">+</span>
          <span class="s">&quot;&lt;i class=&#39;icon-plus&#39;/&gt;&quot;</span> <span class="o">+</span>
        <span class="s">&quot;&lt;/button&gt;&quot;</span> <span class="o">+</span>
      <span class="s">&quot;&lt;/div&gt;&quot;</span>
  
  <span class="nv">Dg.registerTemplate = </span><span class="nf">(templateName, template) -&gt;</span>
    <span class="nx">templates</span><span class="p">[</span><span class="nx">templateName</span><span class="p">]</span> <span class="o">=</span> <span class="nx">template</span></pre></div>             </td>           </tr>                               <tr id="section-11">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-11">&#182;</a>               </div>               <p>Use the TableItemView to create any view attached to the datagrid.
The both methods refreshView and update are mandatory. The refreshView
raise an error if not overriden while the update has a default implementation.
This view expect to have an event aggregator given from the datagrid layout.
If not, an error is raised.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nv">Dg.ItemView = </span><span class="k">class</span> <span class="k">extends</span> <span class="nx">Marionette</span><span class="p">.</span><span class="nx">ItemView</span></pre></div>             </td>           </tr>                               <tr id="section-12">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-12">&#182;</a>               </div>               <p>Constructor to enforce the presence of the event aggregator
used accross the datagrid.
The refreshView method is directly bind to the event view:refresh
from the event aggregator.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nv">initialize: </span><span class="nf">(options) -&gt;</span>
      <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span> <span class="s">&quot;No event aggregator given.&quot;</span> <span class="nx">unless</span> <span class="nx">options</span><span class="p">.</span><span class="nx">vent</span>
      <span class="vi">@vent = </span><span class="nx">options</span><span class="p">.</span><span class="nx">vent</span>
      <span class="nx">@vent</span><span class="p">.</span><span class="kc">on</span> <span class="s">&quot;view:refresh&quot;</span><span class="p">,</span> <span class="nx">@refreshView</span><span class="p">,</span> <span class="nx">@</span>
  </pre></div>             </td>           </tr>                               <tr id="section-13">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-13">&#182;</a>               </div>               <p>Override the default render method from Marionette.ItemView
to trigger the event "item:rendered" once the render method
finished.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nv">render: </span><span class="o">-&gt;</span>
      <span class="k">super</span>
      <span class="nx">@vent</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span><span class="s">&quot;item:rendered&quot;</span><span class="p">,</span> <span class="k">this</span><span class="p">)</span>
      <span class="k">return</span> <span class="nx">@</span>
  </pre></div>             </td>           </tr>                               <tr id="section-14">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-14">&#182;</a>               </div>               <p>TODO: Better comment
Refresh the view with the information given in parameters.
@param [Object] info The metadata that defines the grid collection</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nv">refreshView: </span><span class="nf">(info) -&gt;</span>
      <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span> <span class="s">&quot;The method refreshView(info) must be defined.&quot;</span>
  </pre></div>             </td>           </tr>                               <tr id="section-15">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-15">&#182;</a>               </div>               <p>TODO: Better comment
Trigger an event to update the info
@param [Object] info The metadata updated by the table view (could be part of the whole data)</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nv">update: </span><span class="nf">(info) -&gt;</span>
      <span class="nx">@vent</span><span class="p">.</span><span class="nx">trigger</span> <span class="s">&quot;update&quot;</span><span class="p">,</span> <span class="nx">info</span>
  
    <span class="nv">close: </span><span class="o">-&gt;</span>
      <span class="nx">@vent</span><span class="p">.</span><span class="kc">off</span> <span class="s">&quot;view:refresh&quot;</span><span class="p">,</span> <span class="nx">@refreshView</span>
      <span class="k">super</span>
  </pre></div>             </td>           </tr>                               <tr id="section-16">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-16">&#182;</a>               </div>               <p>Use the DefaultTableItemView is a specialized view from TableItemView. It offers
a default behavior wanted for the general datagrid implementation.
The specialization comes from the fact that all the view extending this one will not
create the el tag based on view configuration but create the el directly from
the template rendering. Therefore, setting the className, tagName or el directly
has no result on this kind of view.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nv">Dg.DefaultItemView = </span><span class="k">class</span> <span class="k">extends</span> <span class="nx">Dg</span><span class="p">.</span><span class="nx">ItemView</span></pre></div>             </td>           </tr>                               <tr id="section-17">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-17">&#182;</a>               </div>               <p>Override the default render method for TableItemView to
set the element to the result of template rendering. This will
suppress the additional <div /> element.
Take care that using this DefaultTableItemView will not allow to specify
any selector or tag as el.
In addition, "item:rendered" is triggered once the view is rendered</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nv">render: </span><span class="o">-&gt;</span>
      <span class="nx">@beforeRender</span><span class="p">()</span> <span class="k">if</span> <span class="nx">@beforeRender</span>
  
      <span class="nx">@trigger</span><span class="p">(</span><span class="s">&quot;before:render&quot;</span><span class="p">,</span> <span class="nx">@</span><span class="p">)</span>
      <span class="nx">@trigger</span><span class="p">(</span><span class="s">&quot;item:before:render&quot;</span><span class="p">,</span> <span class="nx">@</span><span class="p">)</span>
  
      <span class="nx">@setElement</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="nx">Marionette</span><span class="p">.</span><span class="nx">Renderer</span><span class="p">.</span><span class="nx">render</span><span class="p">(</span><span class="nx">@getTemplate</span><span class="p">(),</span> <span class="nx">@serializeData</span><span class="p">())),</span> <span class="kc">true</span><span class="p">)</span>
  
      <span class="nx">@bindUIElements</span><span class="p">()</span>
  
      <span class="nx">@onRender</span><span class="p">()</span> <span class="k">if</span> <span class="nx">@onRender</span>
  
      <span class="nx">@trigger</span><span class="p">(</span><span class="s">&quot;render&quot;</span><span class="p">,</span> <span class="k">this</span><span class="p">)</span>
      <span class="nx">@trigger</span><span class="p">(</span><span class="s">&quot;item:rendered&quot;</span><span class="p">,</span> <span class="k">this</span><span class="p">)</span>
      <span class="nx">@vent</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span><span class="s">&quot;item:rendered&quot;</span><span class="p">,</span> <span class="k">this</span><span class="p">)</span>
  
      <span class="k">return</span> <span class="nx">@</span>
  </pre></div>             </td>           </tr>                               <tr id="section-18">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-18">&#182;</a>               </div>               <p>Default implementation to present general information about the collection
currently displayed.</p>

<p>The following information are shown:
  - from: The number of the first entry shown
  - to: The number of the last entry shown
  - total: The total number of entries shown</p>

<p>A translation is done for the message shown through I18n-js if present. Otherwise,
the default message is used:
  - default message: "Showing ${from} to ${to} of ${total} entries</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nv">Dg.InfoView = </span><span class="k">class</span> <span class="k">extends</span> <span class="nx">Dg</span><span class="p">.</span><span class="nx">DefaultItemView</span>
    <span class="nv">template: </span><span class="nx">templates</span><span class="p">[</span><span class="s">&quot;info&quot;</span><span class="p">]</span>
  </pre></div>             </td>           </tr>                               <tr id="section-19">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-19">&#182;</a>               </div>               <p>Show the message to tell the number of entries shown regarding
the filtering and so on.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nv">refreshView: </span><span class="nf">(info) -&gt;</span></pre></div>             </td>           </tr>                               <tr id="section-20">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-20">&#182;</a>               </div>               <p>Check if the I18n library is used
TODO: Check how to do that
   if I18n is undefined</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="nx">@$el</span><span class="p">.</span><span class="nx">text</span> <span class="s">&quot;Showing </span><span class="si">#{</span><span class="nx">info</span><span class="p">[</span><span class="nx">infoKeys</span><span class="p">.</span><span class="nx">from</span><span class="p">]</span><span class="si">}</span><span class="s"> to </span><span class="si">#{</span><span class="nx">info</span><span class="p">[</span><span class="nx">infoKeys</span><span class="p">.</span><span class="nx">to</span><span class="p">]</span><span class="si">}</span><span class="s"> of </span><span class="si">#{</span><span class="nx">info</span><span class="p">[</span><span class="nx">infoKeys</span><span class="p">.</span><span class="nx">items</span><span class="p">]</span><span class="si">}</span><span class="s"> entries&quot;</span></pre></div>             </td>           </tr>                               <tr id="section-21">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-21">&#182;</a>               </div>               <p>else
    @$el.text I18n.t(i18nKeys.info, {from: info[infoKeys.from], to: info[infoKeys.to], total: info[infoKeys.items]})</p>             </td>             <td class="code">               <div class="highlight"><pre>  </pre></div>             </td>           </tr>                               <tr id="section-22">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-22">&#182;</a>               </div>               <p>Default implementation for the quick search accross the collection. A text field
is used to gather the search term and the filtering happens on the keyup event
from the text field.</p>

<p>The refresh of the collection happens in a delayed function to allow writing
multiple caracters before triggering the refresh. This will avoid strange behavior
and brings a better user experience.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nv">Dg.QuickSearchView = </span><span class="k">class</span> <span class="k">extends</span> <span class="nx">Dg</span><span class="p">.</span><span class="nx">DefaultItemView</span>
    <span class="nv">template: </span><span class="nx">templates</span><span class="p">[</span><span class="s">&quot;quicksearch&quot;</span><span class="p">]</span>
  
    <span class="nv">events:</span>
      <span class="s">&quot;keyup input&quot;</span><span class="o">:</span> <span class="s">&quot;search&quot;</span>
  
    <span class="nv">ui:</span>
      <span class="nv">term: </span><span class="s">&quot;input&quot;</span>
  </pre></div>             </td>           </tr>                               <tr id="section-23">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-23">&#182;</a>               </div>               <p>Intialize the view and prepare the delayed search function</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nv">initialize: </span><span class="nf">(options) -&gt;</span>
      <span class="k">super</span> <span class="nx">options</span>
      <span class="vi">@searchInternal = </span><span class="nx">_</span><span class="p">.</span><span class="nx">debounce</span><span class="p">(</span>
        <span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="o">=&gt;</span>
          <span class="nx">@update</span> <span class="nx">_</span><span class="p">.</span><span class="nx">object</span><span class="p">(</span> <span class="p">[</span><span class="nx">infoKeys</span><span class="p">.</span><span class="nx">term</span><span class="p">],</span> <span class="p">[</span><span class="nx">@ui</span><span class="p">.</span><span class="nx">term</span><span class="p">.</span><span class="nx">val</span><span class="p">().</span><span class="nx">trim</span><span class="p">()]</span> <span class="p">)</span>
        <span class="p">,</span> <span class="mi">300</span>
      <span class="p">)</span>
  </pre></div>             </td>           </tr>                               <tr id="section-24">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-24">&#182;</a>               </div>               <p>Refresh the view by setting the search term into the field
@param [Object] info The data to get the search term</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nv">refreshView: </span><span class="nf">(info) -&gt;</span>
      <span class="nx">@ui</span><span class="p">.</span><span class="nx">term</span><span class="p">.</span><span class="nx">val</span> <span class="nx">info</span><span class="p">[</span><span class="nx">infoKeys</span><span class="p">.</span><span class="nx">term</span><span class="p">]</span>
  </pre></div>             </td>           </tr>                               <tr id="section-25">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-25">&#182;</a>               </div>               <p>Handle the quick search field changes
@param [Event] event The event triggered</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nv">search: </span><span class="nf">(event) -&gt;</span>
      <span class="nx">@searchInternal</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span>
  </pre></div>             </td>           </tr>                               <tr id="section-26">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-26">&#182;</a>               </div>               <p>Default implementation for changing the number of entries displayed on a
single page. The selector is select box.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nv">Dg.PerPageView = </span><span class="k">class</span> <span class="k">extends</span> <span class="nx">Dg</span><span class="p">.</span><span class="nx">DefaultItemView</span>
    <span class="nv">template: </span><span class="nx">templates</span><span class="p">[</span><span class="s">&quot;perpage&quot;</span><span class="p">]</span>
  
    <span class="nv">events:</span>
      <span class="s">&quot;change .per-page&quot;</span><span class="o">:</span> <span class="s">&quot;perPage&quot;</span>
  
    <span class="nv">ui:</span>
      <span class="nv">perPage: </span><span class="s">&quot;.per-page&quot;</span>
  </pre></div>             </td>           </tr>                               <tr id="section-27">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-27">&#182;</a>               </div>               <p>Refresh the view by setting the number of entries per page to the select box
@param [Object] info The data to get the number of entries</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nv">refreshView: </span><span class="nf">(info) -&gt;</span>
      <span class="nx">@ui</span><span class="p">.</span><span class="nx">perPage</span><span class="p">.</span><span class="nx">val</span><span class="p">(</span><span class="nx">info</span><span class="p">[</span><span class="nx">infoKeys</span><span class="p">.</span><span class="nx">perPage</span><span class="p">])</span>
  </pre></div>             </td>           </tr>                               <tr id="section-28">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-28">&#182;</a>               </div>               <p>Handle the select box changes
@param [Event] event The event triggered</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nv">perPage: </span><span class="nf">(event) -&gt;</span>
      <span class="nx">@update</span> <span class="nx">_</span><span class="p">.</span><span class="nx">object</span><span class="p">(</span> <span class="p">[</span><span class="nx">infoKeys</span><span class="p">.</span><span class="nx">perPage</span><span class="p">],</span> <span class="p">[</span><span class="nb">parseInt</span><span class="p">(</span><span class="nx">@ui</span><span class="p">.</span><span class="nx">perPage</span><span class="p">.</span><span class="nx">val</span><span class="p">())]</span> <span class="p">)</span>
  </pre></div>             </td>           </tr>                               <tr id="section-29">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-29">&#182;</a>               </div>               <p>Default tool bar implementation for the grid. It contains a refresh
button that allows to refresh the collection from your backend. A
create button is also present. Buttons are deactivated when they
are clicked.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nv">Dg.ToolbarView = </span><span class="k">class</span> <span class="k">extends</span> <span class="nx">Dg</span><span class="p">.</span><span class="nx">DefaultItemView</span>
    <span class="nv">template: </span><span class="nx">templates</span><span class="p">[</span><span class="s">&quot;toolbar&quot;</span><span class="p">]</span>
  
    <span class="nv">events:</span>
      <span class="s">&quot;click .refresh&quot;</span><span class="o">:</span> <span class="s">&quot;refresh&quot;</span>
      <span class="s">&quot;click .create&quot;</span><span class="o">:</span> <span class="s">&quot;create&quot;</span>
  
    <span class="nv">ui:</span>
      <span class="nv">create: </span><span class="s">&quot;.create&quot;</span>
      <span class="nv">refresh: </span><span class="s">&quot;.refresh&quot;</span>
  </pre></div>             </td>           </tr>                               <tr id="section-30">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-30">&#182;</a>               </div>               <p>Reactivate the buttons</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nv">refreshView: </span><span class="nf">(info) -&gt;</span>
      <span class="nx">@ui</span><span class="p">.</span><span class="nx">refresh</span><span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="s">&quot;disabled&quot;</span><span class="p">)</span>
      <span class="nx">@ui</span><span class="p">.</span><span class="nx">create</span><span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="s">&quot;disabled&quot;</span><span class="p">)</span>
  </pre></div>             </td>           </tr>                               <tr id="section-31">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-31">&#182;</a>               </div>               <p>Handle the create action
@param [Event] event The event triggered</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nv">create: </span><span class="nf">(event) -&gt;</span>
      <span class="nx">event</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">()</span>
  </pre></div>             </td>           </tr>                               <tr id="section-32">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-32">&#182;</a>               </div>               <p>Check if the button is active</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="nx">unless</span> <span class="nx">@ui</span><span class="p">.</span><span class="nx">create</span><span class="p">.</span><span class="nx">hasClass</span><span class="p">(</span><span class="s">&quot;disabled&quot;</span><span class="p">)</span>
        <span class="nx">@ui</span><span class="p">.</span><span class="nx">create</span><span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="s">&quot;disabled&quot;</span><span class="p">)</span></pre></div>             </td>           </tr>                               <tr id="section-33">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-33">&#182;</a>               </div>               <p>TODO: Implement the create event</p>             </td>             <td class="code">               <div class="highlight"><pre>  </pre></div>             </td>           </tr>                               <tr id="section-34">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-34">&#182;</a>               </div>               <p>Handle the refresh action
@param [Event] event The event triggered</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nv">refresh: </span><span class="nf">(event) -&gt;</span>
      <span class="nx">event</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">()</span>
  </pre></div>             </td>           </tr>                               <tr id="section-35">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-35">&#182;</a>               </div>               <p>Check if the button is active</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="nx">unless</span> <span class="nx">@ui</span><span class="p">.</span><span class="nx">refresh</span><span class="p">.</span><span class="nx">hasClass</span><span class="p">(</span><span class="s">&quot;disabled&quot;</span><span class="p">)</span>
        <span class="nx">@ui</span><span class="p">.</span><span class="nx">refresh</span><span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="s">&quot;disabled&quot;</span><span class="p">)</span>
        <span class="nx">@update</span> <span class="p">{}</span>
  </pre></div>             </td>           </tr>                               <tr id="section-36">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-36">&#182;</a>               </div>               <p>Default implementation of the pager view attached to the grid and
the current state of the collection rendered.
The pager includes numbers and page first/last, previous/next
controlls.
Last and First keywords are converted to the real number of last
and first page corresponding to the collection.
Previous and Next keywords are converted to +1 and -1 based on
the current page number.
Checks are done to correct bad page numbers or out of bounds.
The view is customizable through the options hash given to the
initializer. Refer to initialize(options) function for more
details of different possibilities.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nv">Dg.PagerView = </span><span class="k">class</span> <span class="k">extends</span> <span class="nx">Dg</span><span class="p">.</span><span class="nx">DefaultItemView</span>
    <span class="nv">template: </span><span class="nx">templates</span><span class="p">[</span><span class="s">&quot;pager&quot;</span><span class="p">]</span>
  
    <span class="nv">events:</span>
      <span class="s">&quot;click a&quot;</span><span class="o">:</span> <span class="s">&quot;pagging&quot;</span>
  </pre></div>             </td>           </tr>                               <tr id="section-37">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-37">&#182;</a>               </div>               <p>Create a default configuration to start calculation on
first rendering such number of pages and actual page.</p>

<p>The following options are configurable (default values are shown):
options:
  deltaPage: 2
  css:
    active: "active"
    disabled: "disabled"
    page: "page"
  texts:
    first: "&lt;&lt;"
    previous: "&lt;"
    next: ">"
    last: ">>"
    filler: "..."
  numbers: true
  firstAndLast: true
  previousAndNext: true</p>

<p>delatePage: Define the number of pages shown before and after the active one
css: Define the different style added for link "disabled", "active" or "page"
texts: Define the texts used for each link excepted the page numbers
numbers: Define if the page number links are used
firstAndLast: Define if first and last links are used
previousAndNext: Define if previous and next links are used</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nv">initialize: </span><span class="nf">(options) -&gt;</span>
      <span class="k">super</span> <span class="nx">options</span>
  </pre></div>             </td>           </tr>                               <tr id="section-38">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-38">&#182;</a>               </div>               <p>Define the default value for the number of links show before
and after the active link</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="vi">@deltaPage = </span><span class="nx">options</span><span class="p">.</span><span class="nx">deltaPage</span> <span class="o">||</span> <span class="mi">2</span>
  </pre></div>             </td>           </tr>                               <tr id="section-39">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-39">&#182;</a>               </div>               <p>Define the defaults CSS styles if none are provided</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="vi">@css = </span><span class="nx">_</span><span class="p">.</span><span class="nx">defaults</span><span class="p">(</span><span class="nx">options</span><span class="p">.</span><span class="nx">css</span> <span class="o">||</span> <span class="p">{},</span> <span class="p">{</span>
        <span class="nv">active: </span><span class="s">&quot;active&quot;</span>
        <span class="nv">disabled: </span><span class="s">&quot;disabled&quot;</span>
        <span class="nv">page: </span><span class="s">&quot;page&quot;</span>
      <span class="p">})</span>
  </pre></div>             </td>           </tr>                               <tr id="section-40">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-40">&#182;</a>               </div>               <p>Define the texts if none are provided. Use I18n-js if defined
TODO: Check how to do that
   if I18n is undefined</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="vi">@texts = </span><span class="nx">_</span><span class="p">.</span><span class="nx">defaults</span><span class="p">(</span><span class="nx">options</span><span class="p">.</span><span class="nx">texts</span> <span class="o">||</span> <span class="p">{},</span> <span class="p">{</span>
        <span class="nv">first: </span><span class="s">&quot;&lt;&lt;&quot;</span>
        <span class="nv">previous: </span><span class="s">&quot;&lt;&quot;</span>
        <span class="nv">next: </span><span class="s">&quot;&gt;&quot;</span>
        <span class="nv">last: </span><span class="s">&quot;&gt;&gt;&quot;</span>
        <span class="nv">filler: </span><span class="s">&quot;...&quot;</span>
      <span class="p">})</span></pre></div>             </td>           </tr>                               <tr id="section-41">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-41">&#182;</a>               </div>               <p>else
   @texts = _.defaults(options.texts || {}, {
     first: I18n.t i18nKeys.pager.first
     previous: I18n.t i18nKeys.pager.previous
     next: I18n.t i18nKeys.pager.next
     last: I18n.t i18nKeys.pager.last
     filler: I18n.t i18nKeys.pager.filler
   })</p>             </td>             <td class="code">               <div class="highlight"><pre>  </pre></div>             </td>           </tr>                               <tr id="section-42">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-42">&#182;</a>               </div>               <p>Show the numbers by default</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="vi">@numbers = </span><span class="kc">true</span>
      <span class="vi">@numbers = </span><span class="nx">options</span><span class="p">.</span><span class="nx">numbers</span> <span class="nx">unless</span> <span class="nx">options</span><span class="p">.</span><span class="nx">numbers</span> <span class="o">is</span> <span class="kc">undefined</span>
  </pre></div>             </td>           </tr>                               <tr id="section-43">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-43">&#182;</a>               </div>               <p>Show the first and last links by default</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="vi">@firstAndLast = </span><span class="kc">true</span>
      <span class="vi">@firstAndLast = </span><span class="nx">options</span><span class="p">.</span><span class="nx">firstAndLast</span> <span class="nx">unless</span> <span class="nx">options</span><span class="p">.</span><span class="nx">firstAndLast</span> <span class="o">is</span> <span class="kc">undefined</span>
  </pre></div>             </td>           </tr>                               <tr id="section-44">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-44">&#182;</a>               </div>               <p>Show the previous and next links by default</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="vi">@previousAndNext = </span><span class="kc">true</span>
      <span class="vi">@previousAndNext = </span><span class="nx">options</span><span class="p">.</span><span class="nx">previousAndNext</span> <span class="nx">unless</span> <span class="nx">options</span><span class="p">.</span><span class="nx">previousAndNext</span> <span class="o">is</span> <span class="kc">undefined</span>
  </pre></div>             </td>           </tr>                               <tr id="section-45">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-45">&#182;</a>               </div>               <p>Define default values for rendering when no info available</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="vi">@info = </span><span class="p">{}</span>
      <span class="nx">@info</span><span class="p">[</span><span class="nx">infoKeys</span><span class="p">.</span><span class="nx">page</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
      <span class="nx">@info</span><span class="p">[</span><span class="nx">infoKeys</span><span class="p">.</span><span class="nx">pages</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
  </pre></div>             </td>           </tr>                               <tr id="section-46">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-46">&#182;</a>               </div>               <p>Render the pager component based on the info given. Calculation
is done to know how to render the actual page, first/last, next/previous
links.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nv">refreshView: </span><span class="nf">(info) -&gt;</span></pre></div>             </td>           </tr>                               <tr id="section-47">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-47">&#182;</a>               </div>               <p>Save the info</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="vi">@info = </span><span class="nx">info</span>
  </pre></div>             </td>           </tr>                               <tr id="section-48">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-48">&#182;</a>               </div>               <p>Empty element</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="nx">@$el</span><span class="p">.</span><span class="nx">empty</span><span class="p">().</span><span class="nx">hide</span><span class="p">()</span>
  
      <span class="nv">ul = </span><span class="nx">$</span><span class="p">(</span><span class="s">&quot;&lt;ul /&gt;&quot;</span><span class="p">)</span>
  </pre></div>             </td>           </tr>                               <tr id="section-49">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-49">&#182;</a>               </div>               <p>Shortcuts to number of pages and current page</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="nv">page = </span><span class="nx">@info</span><span class="p">[</span><span class="nx">infoKeys</span><span class="p">.</span><span class="nx">page</span><span class="p">]</span>
      <span class="nv">pages = </span><span class="nx">@info</span><span class="p">[</span><span class="nx">infoKeys</span><span class="p">.</span><span class="nx">pages</span><span class="p">]</span>
  </pre></div>             </td>           </tr>                               <tr id="section-50">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-50">&#182;</a>               </div>               <p>Check if there is something to render</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="k">if</span> <span class="nx">page</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">and</span> <span class="nx">pages</span> <span class="o">&gt;</span> <span class="mi">1</span></pre></div>             </td>           </tr>                               <tr id="section-51">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-51">&#182;</a>               </div>               <p>Calculate the bounds</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nv">minPage = </span><span class="nx">page</span> <span class="o">-</span> <span class="nx">@deltaPage</span>
        <span class="nv">maxPage = </span><span class="nx">page</span> <span class="o">+</span> <span class="nx">@deltaPage</span>
  </pre></div>             </td>           </tr>                               <tr id="section-52">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-52">&#182;</a>               </div>               <p>Correct the overflows of the bounds</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nv">minPage = </span><span class="mi">1</span> <span class="k">if</span> <span class="nx">minPage</span> <span class="o">&lt;=</span> <span class="mi">0</span>
        <span class="nv">maxPage = </span><span class="nx">pages</span> <span class="k">if</span> <span class="nx">maxPage</span> <span class="o">&gt;=</span> <span class="nx">pages</span>
  </pre></div>             </td>           </tr>                               <tr id="section-53">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-53">&#182;</a>               </div>               <p>Create first and previous links</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nv">state = </span><span class="k">if</span> <span class="nx">page</span> <span class="o">==</span> <span class="mi">1</span> <span class="k">then</span> <span class="nx">@css</span><span class="p">.</span><span class="nx">disabled</span> <span class="k">else</span> <span class="s">&quot;&quot;</span>
        <span class="nx">ul</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="nx">createLink</span><span class="p">.</span><span class="nx">call</span> <span class="nx">@</span><span class="p">,</span> <span class="nx">@texts</span><span class="p">.</span><span class="nx">first</span><span class="p">,</span> <span class="s">&quot;f&quot;</span><span class="p">,</span> <span class="nx">state</span><span class="p">)</span> <span class="k">if</span> <span class="nx">@firstAndLast</span>
        <span class="nx">ul</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="nx">createLink</span><span class="p">.</span><span class="nx">call</span> <span class="nx">@</span><span class="p">,</span> <span class="nx">@texts</span><span class="p">.</span><span class="nx">previous</span><span class="p">,</span> <span class="s">&quot;p&quot;</span><span class="p">,</span> <span class="nx">state</span><span class="p">)</span> <span class="k">if</span> <span class="nx">@previousAndNext</span>
  </pre></div>             </td>           </tr>                               <tr id="section-54">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-54">&#182;</a>               </div>               <p>Check if number must be shown</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="k">if</span> <span class="nx">@numbers</span></pre></div>             </td>           </tr>                               <tr id="section-55">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-55">&#182;</a>               </div>               <p>Create filler</p>             </td>             <td class="code">               <div class="highlight"><pre>          <span class="nx">ul</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="nx">createLink</span><span class="p">.</span><span class="nx">call</span> <span class="nx">@</span><span class="p">,</span> <span class="nx">@texts</span><span class="p">.</span><span class="nx">filler</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">,</span> <span class="nx">@css</span><span class="p">.</span><span class="nx">disabled</span><span class="p">)</span> <span class="k">if</span> <span class="nx">minPage</span> <span class="o">&gt;</span> <span class="mi">1</span>
  </pre></div>             </td>           </tr>                               <tr id="section-56">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-56">&#182;</a>               </div>               <p>Create page links</p>             </td>             <td class="code">               <div class="highlight"><pre>          <span class="nv">css = </span><span class="k">if</span> <span class="nx">i</span> <span class="o">==</span> <span class="nx">page</span> <span class="k">then</span> <span class="nx">@css</span><span class="p">.</span><span class="nx">active</span> <span class="k">else</span> <span class="s">&quot;&quot;</span>
          <span class="nx">ul</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="nx">createLink</span><span class="p">.</span><span class="nx">call</span> <span class="nx">@</span><span class="p">,</span> <span class="s">&quot;</span><span class="si">#{</span><span class="nx">i</span><span class="si">}</span><span class="s">&quot;</span><span class="p">,</span> <span class="s">&quot;page&quot;</span><span class="p">,</span> <span class="nx">css</span><span class="p">)</span> <span class="k">for</span> <span class="nx">i</span> <span class="k">in</span> <span class="p">[</span><span class="nx">minPage</span><span class="p">..</span><span class="nx">maxPage</span><span class="p">]</span>
  </pre></div>             </td>           </tr>                               <tr id="section-57">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-57">&#182;</a>               </div>               <p>Create filler</p>             </td>             <td class="code">               <div class="highlight"><pre>          <span class="nx">ul</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="nx">createLink</span><span class="p">.</span><span class="nx">call</span> <span class="nx">@</span><span class="p">,</span> <span class="nx">@texts</span><span class="p">.</span><span class="nx">filler</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">,</span> <span class="nx">@css</span><span class="p">.</span><span class="nx">disabled</span><span class="p">)</span> <span class="k">if</span> <span class="nx">maxPage</span> <span class="o">&lt;</span> <span class="nx">pages</span>
  </pre></div>             </td>           </tr>                               <tr id="section-58">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-58">&#182;</a>               </div>               <p>Create last and next links</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nv">state = </span><span class="k">if</span> <span class="nx">page</span> <span class="o">==</span> <span class="nx">pages</span> <span class="k">then</span> <span class="nx">@css</span><span class="p">.</span><span class="nx">disabled</span> <span class="k">else</span> <span class="s">&quot;&quot;</span>
        <span class="nx">ul</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="nx">createLink</span><span class="p">.</span><span class="nx">call</span> <span class="nx">@</span><span class="p">,</span> <span class="nx">@texts</span><span class="p">.</span><span class="nx">next</span><span class="p">,</span> <span class="s">&quot;n&quot;</span><span class="p">,</span> <span class="nx">state</span><span class="p">)</span> <span class="k">if</span> <span class="nx">@previousAndNext</span>
        <span class="nx">ul</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="nx">createLink</span><span class="p">.</span><span class="nx">call</span> <span class="nx">@</span><span class="p">,</span> <span class="nx">@texts</span><span class="p">.</span><span class="nx">last</span><span class="p">,</span> <span class="s">&quot;l&quot;</span><span class="p">,</span> <span class="nx">state</span><span class="p">)</span> <span class="k">if</span> <span class="nx">@firstAndLast</span>
  
        <span class="nx">@$el</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="nx">ul</span><span class="p">).</span><span class="nx">show</span><span class="p">()</span>
  </pre></div>             </td>           </tr>                               <tr id="section-59">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-59">&#182;</a>               </div>               <p>Handle the pagging event when a page link is clicked
@param [Event] event The event triggered</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nv">pagging: </span><span class="nf">(event) -&gt;</span>
      <span class="nx">event</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">()</span>
  
      <span class="nv">target = </span><span class="nx">$</span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">)</span>
  </pre></div>             </td>           </tr>                               <tr id="section-60">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-60">&#182;</a>               </div>               <p>Check that the link clicked is clickable</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="nx">unless</span> <span class="nx">target</span><span class="p">.</span><span class="nx">parent</span><span class="p">().</span><span class="nx">hasClass</span><span class="p">(</span><span class="nx">@css</span><span class="p">.</span><span class="nx">disabled</span><span class="p">)</span> <span class="o">or</span> <span class="nx">target</span><span class="p">.</span><span class="nx">parent</span><span class="p">().</span><span class="nx">hasClass</span><span class="p">(</span><span class="nx">@css</span><span class="p">.</span><span class="nx">active</span><span class="p">)</span></pre></div>             </td>           </tr>                               <tr id="section-61">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-61">&#182;</a>               </div>               <p>Retrieve the type of page link clicked</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nv">type = </span><span class="nx">target</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="s">&quot;type&quot;</span><span class="p">)</span>
  </pre></div>             </td>           </tr>                               <tr id="section-62">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-62">&#182;</a>               </div>               <p>Calculate the correct page</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="k">switch</span> <span class="nx">type</span>
          <span class="k">when</span> <span class="s">&quot;f&quot;</span>
            <span class="nv">page = </span><span class="mi">1</span>
  
          <span class="k">when</span> <span class="s">&quot;p&quot;</span>
            <span class="k">if</span> <span class="nx">@info</span><span class="p">[</span><span class="nx">infoKeys</span><span class="p">.</span><span class="nx">page</span><span class="p">]</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">&gt;</span> <span class="mi">0</span>
              <span class="nv">page = </span><span class="nx">@info</span><span class="p">[</span><span class="nx">infoKeys</span><span class="p">.</span><span class="nx">page</span><span class="p">]</span> <span class="o">-</span> <span class="mi">1</span>
            <span class="k">else</span>
              <span class="nv">page = </span><span class="nx">@info</span><span class="p">[</span><span class="nx">infoKeys</span><span class="p">.</span><span class="nx">page</span><span class="p">]</span>
  
          <span class="k">when</span> <span class="s">&quot;n&quot;</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">@info</span><span class="p">[</span><span class="nx">infoKeys</span><span class="p">.</span><span class="nx">page</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">&lt;</span> <span class="nx">@info</span><span class="p">[</span><span class="nx">infoKeys</span><span class="p">.</span><span class="nx">pages</span><span class="p">]</span>
              <span class="nv">page = </span><span class="nx">@info</span><span class="p">[</span><span class="nx">infoKeys</span><span class="p">.</span><span class="nx">page</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span>
            <span class="k">else</span>
              <span class="nv">page = </span><span class="nx">@info</span><span class="p">[</span><span class="nx">infoKeys</span><span class="p">.</span><span class="nx">pages</span><span class="p">]</span>
  
          <span class="k">when</span> <span class="s">&quot;l&quot;</span>
            <span class="nv">page = </span><span class="nx">@info</span><span class="p">[</span><span class="nx">infoKeys</span><span class="p">.</span><span class="nx">pages</span><span class="p">]</span>
  
          <span class="k">else</span>
            <span class="nv">page = </span><span class="nb">parseInt</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">).</span><span class="nx">text</span><span class="p">())</span>
  </pre></div>             </td>           </tr>                               <tr id="section-63">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-63">&#182;</a>               </div>               <p>Update the collection only if page is different from the current one</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">@update</span> <span class="nx">_</span><span class="p">.</span><span class="nx">object</span><span class="p">(</span> <span class="p">[</span><span class="nx">infoKeys</span><span class="p">.</span><span class="nx">page</span><span class="p">],</span> <span class="p">[</span><span class="nx">page</span><span class="p">]</span> <span class="p">)</span> <span class="k">if</span> <span class="nx">page</span> <span class="o">!=</span> <span class="nx">@info</span><span class="p">[</span><span class="nx">infoKeys</span><span class="p">.</span><span class="nx">page</span><span class="p">]</span>
  </pre></div>             </td>           </tr>                               <tr id="section-64">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-64">&#182;</a>               </div>               <p>Create a link for one element in the pager
@param [String] text The text shown to the user
@param [String] type The type of bookmark
@param [String] state The state of the bookmark</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nv">createLink = </span><span class="nf">(text, type, state) -&gt;</span>
      <span class="nv">a = </span><span class="nx">$</span><span class="p">(</span><span class="s">&quot;&lt;a/&gt;&quot;</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s">&quot;href&quot;</span><span class="p">,</span> <span class="s">&quot;</span><span class="err">#</span><span class="s">&quot;</span><span class="p">).</span><span class="nx">data</span><span class="p">(</span><span class="s">&quot;type&quot;</span><span class="p">,</span> <span class="nx">type</span><span class="p">).</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">@css</span><span class="p">.</span><span class="nx">page</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="s">&quot;</span><span class="si">#{</span><span class="nx">text</span><span class="si">}</span><span class="s">&quot;</span><span class="p">)</span>
      <span class="nv">li = </span><span class="nx">$</span><span class="p">(</span><span class="s">&quot;&lt;li /&gt;&quot;</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span>
      <span class="nx">li</span><span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">state</span><span class="p">)</span> <span class="k">if</span> <span class="nx">state</span>
      <span class="k">return</span> <span class="nx">li</span>
  </pre></div>             </td>           </tr>                               <tr id="section-65">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-65">&#182;</a>               </div>               <p>Default and incomplete implementation of a row view of the grid. The row
is the ItemView of the CompositeView that represents the data grid. This
class should be extended to define the layout to be rendered by the view.
This view offer the default "edit" and "delete" action for a row. The rendering
of the column sorting is also handled by applying styling on each cell of a row.
The styles should be overriden through the initializer (refer to initialize(options)
for more information).
TODO: Review this comment
This default implementation is based on HTML <table /> element and therefore the view
is expected to be a collection of <td /> wrapped into <tr /> that is part of the view
definition.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nv">Dg.RowView = </span><span class="k">class</span> <span class="k">extends</span> <span class="nx">Dg</span><span class="p">.</span><span class="nx">ItemView</span>
    <span class="nv">tagName: </span><span class="s">&quot;tr&quot;</span>
  
    <span class="nv">events:</span>
      <span class="s">&quot;click .edit&quot;</span><span class="o">:</span> <span class="s">&quot;edit&quot;</span>
      <span class="s">&quot;click .delete&quot;</span><span class="o">:</span> <span class="s">&quot;delete&quot;</span>
  </pre></div>             </td>           </tr>                               <tr id="section-66">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-66">&#182;</a>               </div>               <p>The following options are configurable (default values are shown):
options:
  css:
    asc: "sorting-asc"
    desc: "sorting-desc"
    none: null
  cellTagName: "td"</p>

<p>css: Define the different style applied when sorting is done. "asc" and
     "desc" styles are required. Define a "none" style to apply when
     ordering change from desc order to none order.
cellTagName: Define the HTML tag name that represent a cell into the data grid</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nv">initialize: </span><span class="nf">(options) -&gt;</span>
      <span class="k">super</span> <span class="nx">options</span>
  </pre></div>             </td>           </tr>                               <tr id="section-67">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-67">&#182;</a>               </div>               <p>Define the defaults CSS styles if none are provided</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="vi">@css = </span><span class="nx">_</span><span class="p">.</span><span class="nx">defaults</span><span class="p">(</span><span class="nx">options</span><span class="p">.</span><span class="nx">css</span> <span class="o">||</span> <span class="p">{},</span> <span class="p">{</span>
        <span class="nv">asc: </span><span class="s">&quot;sorting-asc&quot;</span>
        <span class="nv">desc: </span><span class="s">&quot;sorting-desc&quot;</span>
      <span class="p">})</span>
  
      <span class="vi">@cellTagName = </span><span class="nx">options</span><span class="p">.</span><span class="nx">cellTagName</span> <span class="o">||</span> <span class="s">&quot;td&quot;</span>
  </pre></div>             </td>           </tr>                               <tr id="section-68">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-68">&#182;</a>               </div>               <p>Apply the different style to represent the ordering done
on the collection.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nv">refreshView: </span><span class="nf">(info) -&gt;</span>
      <span class="k">if</span> <span class="nx">info</span><span class="p">[</span><span class="nx">infoKeys</span><span class="p">.</span><span class="nx">sort</span><span class="p">]</span></pre></div>             </td>           </tr>                               <tr id="section-69">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-69">&#182;</a>               </div>               <p>Update the view state for each column header</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="k">for</span> <span class="nx">target</span> <span class="k">in</span> <span class="nx">@$el</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">@cellTagName</span><span class="p">)</span>
          <span class="nv">target = </span><span class="nx">$</span><span class="p">(</span><span class="nx">target</span><span class="p">)</span>
  </pre></div>             </td>           </tr>                               <tr id="section-70">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-70">&#182;</a>               </div>               <p>Remove previous sorting classes</p>             </td>             <td class="code">               <div class="highlight"><pre>          <span class="nx">target</span><span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="s">&quot;</span><span class="si">#{</span><span class="nx">@css</span><span class="p">.</span><span class="nx">asc</span><span class="si">}</span><span class="s"> </span><span class="si">#{</span><span class="nx">@css</span><span class="p">.</span><span class="nx">desc</span><span class="si">}</span><span class="s">&quot;</span><span class="p">)</span>
          <span class="nx">target</span><span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="nx">@css</span><span class="p">.</span><span class="nx">none</span><span class="p">)</span> <span class="k">if</span> <span class="nx">@css</span><span class="p">.</span><span class="nx">none</span>
  </pre></div>             </td>           </tr>                               <tr id="section-71">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-71">&#182;</a>               </div>               <p>Check if the current column header is sorted</p>             </td>             <td class="code">               <div class="highlight"><pre>          <span class="k">if</span> <span class="nx">info</span><span class="p">[</span><span class="nx">infoKeys</span><span class="p">.</span><span class="nx">sort</span><span class="p">][</span><span class="nx">target</span><span class="p">.</span><span class="nx">index</span><span class="p">()]</span></pre></div>             </td>           </tr>                               <tr id="section-72">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-72">&#182;</a>               </div>               <p>Check which sorting order is to apply</p>             </td>             <td class="code">               <div class="highlight"><pre>            <span class="k">if</span> <span class="nx">info</span><span class="p">[</span><span class="nx">infoKeys</span><span class="p">.</span><span class="nx">sort</span><span class="p">][</span><span class="nx">target</span><span class="p">.</span><span class="nx">index</span><span class="p">()]</span> <span class="o">==</span> <span class="nx">infoKeys</span><span class="p">.</span><span class="nx">asc</span>
              <span class="nx">target</span><span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">@css</span><span class="p">.</span><span class="nx">asc</span><span class="p">)</span>
            <span class="k">else</span>
              <span class="nx">target</span><span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">@css</span><span class="p">.</span><span class="nx">desc</span><span class="p">)</span>
          <span class="k">else</span> <span class="k">if</span> <span class="nx">@css</span><span class="p">.</span><span class="nx">none</span>
            <span class="nx">target</span><span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">@css</span><span class="p">.</span><span class="nx">none</span><span class="p">)</span>
  </pre></div>             </td>           </tr>                               <tr id="section-73">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-73">&#182;</a>               </div>               <p>Handle the edit action
@param [Event] event The event triggered</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nv">edit: </span><span class="nf">(event) -&gt;</span>
      <span class="nx">event</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">()</span>
      <span class="nx">@vent</span><span class="p">.</span><span class="nx">trigger</span> <span class="s">&quot;row:edit&quot;</span><span class="p">,</span> <span class="nx">@model</span>
  </pre></div>             </td>           </tr>                               <tr id="section-74">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-74">&#182;</a>               </div>               <p>Handle the delete action
@param [Event] event The event triggered</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="k">delete</span><span class="o">:</span> <span class="nf">(event) -&gt;</span>
      <span class="nx">event</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">()</span>
      <span class="nx">@vent</span><span class="p">.</span><span class="nx">trigger</span> <span class="s">&quot;row:delete&quot;</span><span class="p">,</span> <span class="nx">@model</span>
  <span class="nv">EmptyView = </span><span class="k">class</span> <span class="k">extends</span> <span class="nx">Dg</span><span class="p">.</span><span class="nx">DefaultItemView</span>
    <span class="nv">template: </span><span class="nx">templates</span><span class="p">[</span><span class="s">&quot;empty&quot;</span><span class="p">]</span>
  
    <span class="nv">ui:</span>
      <span class="nv">empty: </span><span class="s">&quot;.empty&quot;</span>
  
    <span class="nv">initialize: </span><span class="nf">(options) -&gt;</span>
      <span class="vi">@columns = </span><span class="nx">options</span><span class="p">.</span><span class="nx">columns</span>
      <span class="k">super</span> <span class="nx">options</span>
  
    <span class="nv">onRender: </span><span class="o">-&gt;</span>
      <span class="nx">@$el</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s">&quot;colspan&quot;</span><span class="p">,</span> <span class="nx">@columns</span><span class="p">)</span>
  
    <span class="nv">refreshView: </span><span class="nf">(info) -&gt;</span>
  <span class="nv">LoadingView = </span><span class="k">class</span> <span class="k">extends</span> <span class="nx">Backbone</span><span class="p">.</span><span class="nx">Marionette</span><span class="p">.</span><span class="nx">ItemView</span>
    <span class="nv">template: </span><span class="nx">templates</span><span class="p">[</span><span class="s">&quot;gridempty&quot;</span><span class="p">]</span>
  </pre></div>             </td>           </tr>                               <tr id="section-75">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-75">&#182;</a>               </div>               <p>render: ->
     @beforeRender() if @beforeRender</p>

<pre><code> @trigger("before:render", @)
 @trigger("item:before:render", @)


 el = $(Marionette.Renderer.render(@getTemplate(), @serializeData()))
 @setElement el

 @bindUIElements();

 @onRender() if @onRender

 @trigger("render", this)
 @trigger("item:rendered", this)
</code></pre>             </td>             <td class="code">               <div class="highlight"><pre>  
  <span class="nv">Dg.HeaderView = </span><span class="k">class</span> <span class="k">extends</span> <span class="nx">Dg</span><span class="p">.</span><span class="nx">ItemView</span>
    <span class="nv">tagName: </span><span class="s">&quot;thead&quot;</span>
  
    <span class="nv">events:</span>
      <span class="s">&quot;click .sorting&quot;</span><span class="o">:</span> <span class="s">&quot;sort&quot;</span>
  
    <span class="nv">refreshView: </span><span class="nf">(info) -&gt;</span></pre></div>             </td>           </tr>                               <tr id="section-76">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-76">&#182;</a>               </div>               <p>Update the view state for each column header</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="k">for</span> <span class="nx">target</span> <span class="k">in</span> <span class="nx">@$el</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s">&quot;th&quot;</span><span class="p">)</span>
        <span class="nv">target = </span><span class="nx">$</span><span class="p">(</span><span class="nx">target</span><span class="p">)</span>
  </pre></div>             </td>           </tr>                               <tr id="section-77">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-77">&#182;</a>               </div>               <p>Check if the target is electible for sorting</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="k">if</span> <span class="nx">target</span><span class="p">.</span><span class="nx">hasClass</span><span class="p">(</span><span class="s">&quot;sorting&quot;</span><span class="p">)</span></pre></div>             </td>           </tr>                               <tr id="section-78">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-78">&#182;</a>               </div>               <p>Remove previous sorting classes</p>             </td>             <td class="code">               <div class="highlight"><pre>          <span class="nx">target</span><span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="s">&quot;sorting-asc sorting-desc&quot;</span><span class="p">)</span>
  </pre></div>             </td>           </tr>                               <tr id="section-79">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-79">&#182;</a>               </div>               <p>Check if a sorting configuration is already existing</p>             </td>             <td class="code">               <div class="highlight"><pre>          <span class="k">if</span> <span class="nx">info</span><span class="p">[</span><span class="nx">infoKeys</span><span class="p">.</span><span class="nx">sort</span><span class="p">]</span></pre></div>             </td>           </tr>                               <tr id="section-80">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-80">&#182;</a>               </div>               <p>Store the current configuration</p>             </td>             <td class="code">               <div class="highlight"><pre>            <span class="vi">@sortConfiguration = </span><span class="nx">info</span><span class="p">[</span><span class="nx">infoKeys</span><span class="p">.</span><span class="nx">sort</span><span class="p">]</span>
  </pre></div>             </td>           </tr>                               <tr id="section-81">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-81">&#182;</a>               </div>               <p>Check if the current column header is sorted</p>             </td>             <td class="code">               <div class="highlight"><pre>            <span class="k">if</span> <span class="nx">@sortConfiguration</span><span class="p">[</span><span class="nx">target</span><span class="p">.</span><span class="nx">index</span><span class="p">()]</span></pre></div>             </td>           </tr>                               <tr id="section-82">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-82">&#182;</a>               </div>               <p>Check which sorting order is to apply</p>             </td>             <td class="code">               <div class="highlight"><pre>              <span class="k">if</span> <span class="nx">@sortConfiguration</span><span class="p">[</span><span class="nx">target</span><span class="p">.</span><span class="nx">index</span><span class="p">()]</span> <span class="o">==</span> <span class="nx">infoKeys</span><span class="p">.</span><span class="nx">asc</span>
                <span class="nx">target</span><span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="s">&quot;sorting-asc&quot;</span><span class="p">)</span>
              <span class="k">else</span>
                <span class="nx">target</span><span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="s">&quot;sorting-desc&quot;</span><span class="p">)</span>
  
    <span class="nv">sort: </span><span class="nf">(event) -&gt;</span></pre></div>             </td>           </tr>                               <tr id="section-83">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-83">&#182;</a>               </div>               <p>Retrieve the header index</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="nv">idx = </span><span class="nx">$</span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">).</span><span class="nx">index</span><span class="p">()</span>
  </pre></div>             </td>           </tr>                               <tr id="section-84">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-84">&#182;</a>               </div>               <p>Be sure there is a sorting configuration</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="vi">@sortConfiguration = </span><span class="p">{}</span> <span class="nx">unless</span> <span class="nx">@sortConfiguration</span>
  </pre></div>             </td>           </tr>                               <tr id="section-85">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-85">&#182;</a>               </div>               <p>Check if multi column sorting is disabled</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="nx">unless</span> <span class="nx">event</span><span class="p">.</span><span class="nx">shiftKey</span></pre></div>             </td>           </tr>                               <tr id="section-86">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-86">&#182;</a>               </div>               <p>Check if the column clickd is already sorted</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="k">if</span> <span class="nx">@sortConfiguration</span><span class="p">[</span><span class="nx">idx</span><span class="p">]</span></pre></div>             </td>           </tr>                               <tr id="section-87">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-87">&#182;</a>               </div>               <p>Keep only this column for the new configuration</p>             </td>             <td class="code">               <div class="highlight"><pre>          <span class="vi">@sortConfiguration = </span><span class="nx">_</span><span class="p">.</span><span class="nx">pick</span><span class="p">(</span><span class="nx">@sortConfiguration</span><span class="p">,</span> <span class="nx">idx</span><span class="p">)</span>
        <span class="k">else</span></pre></div>             </td>           </tr>                               <tr id="section-88">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-88">&#182;</a>               </div>               <p>Create a new sorting configuration</p>             </td>             <td class="code">               <div class="highlight"><pre>          <span class="vi">@sortConfiguration = </span><span class="p">{}</span>
  </pre></div>             </td>           </tr>                               <tr id="section-89">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-89">&#182;</a>               </div>               <p>Check if the column is already sorted</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="k">if</span> <span class="nx">@sortConfiguration</span><span class="p">[</span><span class="nx">idx</span><span class="p">]</span> <span class="o">is</span> <span class="kc">undefined</span>
        <span class="nx">@sortConfiguration</span><span class="p">[</span><span class="nx">idx</span><span class="p">]</span> <span class="o">=</span> <span class="nx">infoKeys</span><span class="p">.</span><span class="nx">asc</span>
  </pre></div>             </td>           </tr>                               <tr id="section-90">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-90">&#182;</a>               </div>               <p>Check if the sort order is ascendant</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="k">else</span> <span class="k">if</span> <span class="nx">@sortConfiguration</span><span class="p">[</span><span class="nx">idx</span><span class="p">]</span> <span class="o">==</span> <span class="nx">infoKeys</span><span class="p">.</span><span class="nx">asc</span>
        <span class="nx">@sortConfiguration</span><span class="p">[</span><span class="nx">idx</span><span class="p">]</span> <span class="o">=</span> <span class="nx">infoKeys</span><span class="p">.</span><span class="nx">desc</span>
  </pre></div>             </td>           </tr>                               <tr id="section-91">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-91">&#182;</a>               </div>               <p>Otherwise reset the sorting</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="k">else</span>
        <span class="nx">@sortConfiguration</span><span class="p">[</span><span class="nx">idx</span><span class="p">]</span> <span class="o">=</span> <span class="kc">undefined</span>
  </pre></div>             </td>           </tr>                               <tr id="section-92">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-92">&#182;</a>               </div>               <p>Ask for a collection update</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="nx">@update</span> <span class="nx">_</span><span class="p">.</span><span class="nx">object</span><span class="p">(</span> <span class="p">[</span><span class="nx">infoKeys</span><span class="p">.</span><span class="nx">sort</span><span class="p">],</span> <span class="p">[</span><span class="nx">@sortConfiguration</span><span class="p">]</span> <span class="p">)</span>
  
    <span class="nv">columns: </span><span class="o">-&gt;</span>
      <span class="nx">@$el</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s">&quot;th&quot;</span><span class="p">).</span><span class="nx">length</span></pre></div>             </td>           </tr>                               <tr id="section-93">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-93">&#182;</a>               </div>               <p>The main view to manage the data table</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nv">Dg.TableView = </span><span class="nx">Marionette</span><span class="p">.</span><span class="nx">CompositeView</span><span class="p">.</span><span class="nx">extend</span>
      <span class="nv">template: </span><span class="nx">templates</span><span class="p">[</span><span class="s">&quot;table&quot;</span><span class="p">]</span>
      <span class="nv">itemViewContainer: </span><span class="s">&quot;tbody&quot;</span>
      <span class="nv">emptyView: </span><span class="nx">Dg</span><span class="p">.</span><span class="nx">EmptyView</span>
  
      <span class="nv">itemViewOptions: </span><span class="nf">(model) -&gt;</span>
        <span class="k">return</span> <span class="p">{</span> <span class="nv">vent: </span><span class="nx">@vent</span><span class="p">,</span> <span class="nv">columns: </span><span class="nx">@columns</span><span class="p">()</span> <span class="p">}</span>
  
      <span class="nv">initialize: </span><span class="nf">(options) -&gt;</span>
        <span class="vi">@vent = </span><span class="nx">options</span><span class="p">.</span><span class="nx">vent</span>
        <span class="vi">@collection = </span><span class="nx">options</span><span class="p">.</span><span class="nx">collection</span>
  </pre></div>             </td>           </tr>                               <tr id="section-94">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-94">&#182;</a>               </div>               <p>Override the rendering to be able to do exactly what is required</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="nv">render: </span><span class="o">-&gt;</span>
        <span class="nx">@resetItemViewContainer</span><span class="p">()</span>
  
        <span class="nx">@setElement</span> <span class="nx">@renderModel</span><span class="p">()</span>
  
        <span class="k">if</span> <span class="nx">@headerView</span>
          <span class="vi">@header = </span><span class="k">new</span> <span class="nx">@headerView</span><span class="p">(</span><span class="nv">vent: </span><span class="nx">@vent</span><span class="p">)</span>
          <span class="nv">tableHeader = </span> <span class="nx">@header</span><span class="p">.</span><span class="nx">render</span><span class="p">().</span><span class="nx">el</span>
          <span class="nx">@$el</span><span class="p">.</span><span class="nx">prepend</span><span class="p">(</span><span class="nx">tableHeader</span><span class="p">)</span>
  
        <span class="nx">@bindUIElements</span><span class="p">()</span>
        <span class="nx">@trigger</span><span class="p">(</span><span class="s">&quot;composite:model:rendered&quot;</span><span class="p">)</span>
        <span class="nx">@trigger</span><span class="p">(</span><span class="s">&quot;render&quot;</span><span class="p">)</span>
  
        <span class="nx">@renderCollection</span><span class="p">()</span>
        <span class="nx">@trigger</span><span class="p">(</span><span class="s">&quot;composite:rendered&quot;</span><span class="p">)</span>
  
        <span class="nx">@</span>
  </pre></div>             </td>           </tr>                               <tr id="section-95">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-95">&#182;</a>               </div>               <p>Be sure that the header view is closed before closing normally</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="nv">beforeClose: </span><span class="nf">() -&gt;</span>
        <span class="nx">@header</span><span class="p">.</span><span class="nx">close</span><span class="p">()</span> <span class="k">if</span> <span class="nx">@header</span>
  
      <span class="nv">columns: </span><span class="o">-&gt;</span>
        <span class="k">if</span> <span class="nx">@header</span>
          <span class="nx">@header</span><span class="p">.</span><span class="nx">columns</span><span class="p">()</span>
        <span class="k">else</span>
          <span class="mi">0</span>
  
  <span class="nv">Dg.TableRegion = </span><span class="k">class</span> <span class="k">extends</span> <span class="nx">Marionette</span><span class="p">.</span><span class="nx">Region</span></pre></div>             </td>           </tr>                               <tr id="section-96">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-96">&#182;</a>               </div>               <p># Open
   # @param [Backbone.View] view The view to open
   open: (view) ->
     @$el.html view.el
     @$el.show "slide", { direction: "up" }, 1000</p>

<p># Show
   # @param [Backbone.View] view The view to show
   show: (view) ->
     if @$el
       $(@el).hide "slide", { direction: "up" }, 1000, =>
         super view
     else
       super view</p>             </td>             <td class="code">               <div class="highlight"><pre>  
  <span class="nv">Dg.GridLayout = </span><span class="k">class</span> <span class="k">extends</span> <span class="nx">Marionette</span><span class="p">.</span><span class="nx">Layout</span>
    <span class="nv">template: </span><span class="nx">templates</span><span class="p">[</span><span class="s">&quot;grid&quot;</span><span class="p">]</span>
  </pre></div>             </td>           </tr>                               <tr id="section-97">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-97">&#182;</a>               </div>               <p>Constructor
@param [Hash] options Options to configure the layout</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nv">initialize: </span><span class="nf">(options) -&gt;</span>
      <span class="vi">@vent = </span><span class="k">new</span> <span class="nx">Marionette</span><span class="p">.</span><span class="nx">EventAggregator</span><span class="p">()</span>
  
      <span class="nx">@</span><span class="kc">on</span> <span class="s">&quot;render&quot;</span><span class="p">,</span> <span class="nx">@renderRegions</span>
  
      <span class="nx">@vent</span><span class="p">.</span><span class="kc">on</span> <span class="s">&quot;update&quot;</span><span class="p">,</span> <span class="nx">@handleUpdate</span>
      <span class="nx">@vent</span><span class="p">.</span><span class="kc">on</span> <span class="s">&quot;refresh&quot;</span><span class="p">,</span> <span class="nx">@handleRefresh</span>
      <span class="nx">@vent</span><span class="p">.</span><span class="kc">on</span> <span class="s">&quot;row:edit&quot;</span><span class="p">,</span> <span class="nx">@handleEditModel</span>
  
      <span class="nx">@collection</span><span class="p">.</span><span class="kc">on</span> <span class="s">&quot;fetched&quot;</span><span class="p">,</span> <span class="nx">@refreshGrid</span>
  
    <span class="nv">renderRegions: </span><span class="o">=&gt;</span>
      <span class="k">for</span> <span class="nx">regionName</span><span class="p">,</span> <span class="nx">regionDefinition</span> <span class="k">of</span> <span class="nx">@regions</span>
        <span class="nx">unless</span> <span class="nx">regionName</span> <span class="o">==</span> <span class="s">&quot;table&quot;</span>
          <span class="nv">options = </span><span class="nx">_</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span><span class="nv">vent: </span><span class="nx">@vent</span><span class="p">},</span> <span class="nx">regionDefinition</span><span class="p">.</span><span class="nx">options</span> <span class="o">||</span> <span class="p">{})</span>
          <span class="nx">@</span><span class="p">[</span><span class="nx">regionName</span><span class="p">].</span><span class="nx">show</span> <span class="k">new</span> <span class="nx">regionDefinition</span><span class="p">.</span><span class="nx">view</span><span class="p">(</span><span class="nx">options</span><span class="p">)</span>
  
      <span class="nx">@table</span><span class="p">.</span><span class="nx">show</span><span class="p">(</span><span class="k">new</span> <span class="nx">LoadingView</span><span class="p">())</span>
  
      <span class="nx">@collection</span><span class="p">.</span><span class="nx">fetch</span><span class="p">()</span>
  
    <span class="nv">refreshGrid: </span><span class="o">=&gt;</span>
      <span class="nx">@table</span><span class="p">.</span><span class="nx">show</span> <span class="k">new</span> <span class="nx">@regions</span><span class="p">.</span><span class="nx">table</span><span class="p">.</span><span class="nx">view</span><span class="p">(</span><span class="nv">vent: </span><span class="nx">@vent</span><span class="p">,</span> <span class="nv">collection: </span><span class="nx">@collection</span><span class="p">)</span>
      <span class="nx">@vent</span><span class="p">.</span><span class="nx">trigger</span> <span class="s">&quot;view:refresh&quot;</span><span class="p">,</span> <span class="nx">@collection</span><span class="p">.</span><span class="nx">getInfo</span><span class="p">()</span>
  </pre></div>             </td>           </tr>                               <tr id="section-98">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-98">&#182;</a>               </div>               <p>TODO: Review this part of code</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nv">handleUpdate: </span><span class="p">(</span><span class="nx">options</span><span class="p">)</span> <span class="o">=&gt;</span>
      <span class="nx">@table</span><span class="p">.</span><span class="nx">show</span><span class="p">(</span><span class="k">new</span> <span class="nx">LoadingView</span><span class="p">())</span>
      <span class="nx">@collection</span><span class="p">.</span><span class="nx">updateInfo</span> <span class="nx">options</span>
  
    <span class="nv">handleRefresh: </span><span class="o">=&gt;</span>
      <span class="nx">@collection</span><span class="p">.</span><span class="nx">refresh</span><span class="p">()</span>
  
    <span class="nv">handleEditModel: </span><span class="nf">(model) -&gt;</span></pre></div>             </td>           </tr>                               <tr id="section-99">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-99">&#182;</a>               </div>               <p>TODO: Trigger event to update the record</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="nx">alert</span> <span class="nx">model</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s">&quot;name&quot;</span><span class="p">)</span>
  
    <span class="nv">close: </span><span class="o">-&gt;</span>
      <span class="nx">@collection</span><span class="p">.</span><span class="kc">off</span> <span class="s">&quot;fetched&quot;</span><span class="p">,</span> <span class="nx">@refreshGrid</span>
      <span class="k">super</span>
  </pre></div>             </td>           </tr>                               <tr id="section-100">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-100">&#182;</a>               </div>               <pre><code> @on "transition:open", =&gt;
   @showTable()
</code></pre>             </td>             <td class="code">               <div class="highlight"><pre>  </pre></div>             </td>           </tr>                               <tr id="section-101">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-101">&#182;</a>               </div>               <p>showTable: ->
     if @gridTable.currentView
       @gridTable.currentView.renderCollection()
     else
       @gridTable.show(new @tableView(collection: @collection))</p>             </td>             <td class="code">               <div class="highlight"><pre>  

  <span class="nv">Dg.createRowView = </span><span class="nf">(model, templatePath) -&gt;</span>
    <span class="k">return</span> <span class="nx">Dg</span><span class="p">.</span><span class="nx">RowView</span><span class="p">.</span><span class="nx">extend</span>
      <span class="nv">template: </span><span class="nx">templatePath</span>
      <span class="nv">model: </span><span class="nx">model</span>

  <span class="nv">Dg.createTableHeaderView = </span><span class="nf">(templatePath) -&gt;</span>
    <span class="k">return</span> <span class="nx">Dg</span><span class="p">.</span><span class="nx">HeaderView</span><span class="p">.</span><span class="nx">extend</span>
      <span class="nv">template: </span><span class="nx">templatePath</span>

  <span class="nv">Dg.createDefaultLayout = </span><span class="nf">(options) -&gt;</span>
    <span class="nv">regions = </span><span class="nx">options</span><span class="p">.</span><span class="nx">gridRegions</span> <span class="o">||</span> <span class="p">{}</span>

    <span class="nv">regions = </span><span class="nx">reject</span><span class="p">(</span>
      <span class="nx">defaults</span><span class="p">(</span><span class="nx">regions</span><span class="p">,</span> <span class="nx">gridRegions</span><span class="p">),</span>
      <span class="nf">(object, key, value) -&gt;</span>
        <span class="o">not</span> <span class="nx">_</span><span class="p">.</span><span class="nx">isObject</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="nx">options</span><span class="p">.</span><span class="nx">collection</span> <span class="o">is</span> <span class="kc">undefined</span>
      <span class="nv">gridLayout = </span><span class="nx">Dg</span><span class="p">.</span><span class="nx">GridLayout</span><span class="p">.</span><span class="nx">extend</span>
        <span class="nv">regions: </span><span class="nx">regions</span>
    <span class="k">else</span>
      <span class="nv">gridLayout = </span><span class="nx">Dg</span><span class="p">.</span><span class="nx">GridLayout</span><span class="p">.</span><span class="nx">extend</span>
        <span class="nv">collection: </span><span class="nx">options</span><span class="p">.</span><span class="nx">collection</span>
        <span class="nv">regions: </span><span class="nx">regions</span>

    <span class="k">return</span> <span class="nx">gridLayout</span>

  <span class="nv">i18nKeys =</span>
    <span class="nv">info: </span><span class="s">&quot;datagrid.info&quot;</span>
    <span class="nv">pager:</span>
      <span class="nv">first: </span><span class="s">&quot;datagrid.pager.first&quot;</span>
      <span class="nv">last: </span><span class="s">&quot;datagrid.pager.last&quot;</span>
      <span class="nv">next: </span><span class="s">&quot;datagrid.pager.next&quot;</span>
      <span class="nv">previous: </span><span class="s">&quot;datagrid.pager.previous&quot;</span>
      <span class="nv">filler: </span><span class="s">&quot;datagrid.pager.filler&quot;</span>

  <span class="nv">infoKeys =</span>
    <span class="nv">from: </span><span class="s">&quot;from&quot;</span>
    <span class="nv">to: </span><span class="s">&quot;to&quot;</span>
    <span class="nv">items: </span><span class="s">&quot;items&quot;</span>
    <span class="nv">totalItems: </span><span class="s">&quot;totalItems&quot;</span>
    <span class="nv">perPage: </span><span class="s">&quot;perPage&quot;</span>
    <span class="nv">pages: </span><span class="s">&quot;pages&quot;</span>
    <span class="nv">page: </span><span class="s">&quot;page&quot;</span>
    <span class="nv">term: </span><span class="s">&quot;term&quot;</span>
    <span class="nv">sort: </span><span class="s">&quot;sort&quot;</span>
    <span class="nv">asc: </span><span class="s">&quot;A&quot;</span>
    <span class="nv">desc: </span><span class="s">&quot;D&quot;</span>

  <span class="nv">gridRegions =</span>
    <span class="nv">table:</span>
      <span class="nv">selector: </span><span class="s">&quot;.dgTable&quot;</span>
      <span class="nv">regionType: </span><span class="nx">Dg</span><span class="p">.</span><span class="nx">TableRegion</span>
      <span class="nv">view: </span><span class="nx">Dg</span><span class="p">.</span><span class="nx">TableView</span>
    <span class="nv">toolbar:</span>
      <span class="nv">selector: </span><span class="s">&quot;.dgToolbar&quot;</span>
      <span class="nv">view: </span><span class="nx">Dg</span><span class="p">.</span><span class="nx">ToolbarView</span>
    <span class="nv">quickSearch:</span>
      <span class="nv">selector: </span><span class="s">&quot;.dgQuickSearch&quot;</span>
      <span class="nv">view: </span><span class="nx">Dg</span><span class="p">.</span><span class="nx">QuickSearchView</span>
    <span class="nv">perPage:</span>
      <span class="nv">selector: </span><span class="s">&quot;.dgPerPage&quot;</span>
      <span class="nv">view: </span><span class="nx">Dg</span><span class="p">.</span><span class="nx">PerPageView</span>
    <span class="nv">info:</span>
      <span class="nv">selector: </span><span class="s">&quot;.dgInfo&quot;</span>
      <span class="nv">view: </span><span class="nx">Dg</span><span class="p">.</span><span class="nx">InfoView</span>
    <span class="nv">pager:</span>
      <span class="nv">selector: </span><span class="s">&quot;.dgPager&quot;</span><span class="p">,</span>
      <span class="nv">view: </span><span class="nx">Dg</span><span class="p">.</span><span class="nx">PagerView</span>

  <span class="nv">Dg.setupDefaultI18nBindings = </span><span class="nf">(options) -&gt;</span>
    <span class="nv">i18nKeys = </span><span class="nx">_</span><span class="p">.</span><span class="nx">defaults</span><span class="p">(</span>
      <span class="nx">options</span><span class="p">.</span><span class="nx">i18n</span> <span class="o">||</span> <span class="p">{},</span>
      <span class="nx">i18nKeys</span>
    <span class="p">)</span>

  <span class="nv">Dg.setupDefaultInfoBindings = </span><span class="nf">(options) -&gt;</span>
    <span class="nv">infoKeys = </span><span class="nx">_</span><span class="p">.</span><span class="nx">defaults</span><span class="p">(</span>
      <span class="nx">options</span><span class="p">.</span><span class="nx">bindings</span> <span class="o">||</span> <span class="p">{},</span>
      <span class="nx">infoKeys</span>
    <span class="p">)</span>

  <span class="nv">Dg.setupDefaultGridLayout = </span><span class="nf">(options) -&gt;</span>
    <span class="nv">gridRegions = </span><span class="nx">defaults</span><span class="p">(</span>
      <span class="nx">options</span><span class="p">.</span><span class="nx">gridRegions</span> <span class="o">||</span> <span class="p">{},</span>
      <span class="nx">gridRegions</span>
    <span class="p">)</span>

  <span class="k">return</span> <span class="nx">Dg</span>
<span class="p">)(</span><span class="nx">Backbone</span><span class="p">,</span> <span class="nx">Backbone</span><span class="p">.</span><span class="nx">Marionette</span><span class="p">,</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">$</span> <span class="o">||</span> <span class="nb">window</span><span class="p">.</span><span class="nx">jQuery</span> <span class="o">||</span> <span class="nb">window</span><span class="p">.</span><span class="nx">Zepto</span> <span class="o">||</span> <span class="nb">window</span><span class="p">.</span><span class="nx">ender</span><span class="p">)</span>

</pre></div>             </td>           </tr>                </tbody>     </table>   </div> </body> </html> 