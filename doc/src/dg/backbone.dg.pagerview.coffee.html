<!DOCTYPE html>
<html>
<head>
  <title>backbone.dg.pagerview.coffee</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="../../doc-style.css" />
  <script src="../../doc-filelist.js"></script>
  <script>
    var relativeDir = "../../", thisFile = "src/dg/backbone.dg.pagerview.coffee", defaultSidebar = true;
  </script>
  <script src="../../doc-script.js"></script>
</head>
<body>
  <div id="sidebar_wrapper">
    <div id="sidebar_switch">
      <span class="tree">Files</span>
      <span class="headings">Headings</span>
    </div>
    <div id="tree"></div>
    <div id="headings">
      <div class="heading h2">
        <a href="#dg.pagerview">Dg.PagerView</a>
      </div>
    </div>
  </div>
  <div id="sidebar-toggle"></div>
  <div id="container"><div class="background highlight"></div>
<table cellpadding="0" cellspacing="0">
  <tbody>
      <tr>
        <td class="docs"><div class="dox">
  <div class="summary">
<div class="pilwrap" id="dg.pagerview">
  <h2>
    <a href="#dg.pagerview" name="dg.pagerview" class="pilcrow">&#182;</a>
    Dg.PagerView
  </h2>
</div>

  </div>
  <div class="body"><p>The <code>Dg.PagerView</code> is probably one of the most complicated view
as the numbering paging require calculation to render correctly.</p>

<p>The pager includes numbers and page first/last, previous/next
controlls. A delta of number of pages shown is used to render
the number controls.</p>

<p>Last and First keywords are converted to the real number of last
and first page corresponding to the collection.</p>

<p>Previous and Next keywords are converted to +1 and -1 based on
the current page number.</p>

<p>Checks are done to correct bad page numbers or out of bounds in
regards of the collection metadata.</p>

<div class='highlight'><pre><code language=''># Default options
options:
deltaPage: 2
css:
active: "active"
disabled: "disabled"
page: "page"
texts:
first: "&lt;&lt;"
previous: "&lt;"
next: "&gt;"
last: "&gt;&gt;"
filler: "..."
numbers: true
firstAndLast: true
previousAndNext: true
</code></pre></div>

<ul>
<li><strong>delatePage</strong>: Number of pages shown before and after the active one (if available)</li>
<li><strong>css</strong>: Different style added for link <code>disabled</code>, <code>active</code> or <code>page</code></li>
<li><strong>texts</strong>: Texts used for each link excepted the page numbers</li>
<li><strong>numbers</strong>: Enable/Disable page number links</li>
<li><strong>firstAndLast</strong>: Enable/Disable first and last links</li>
<li><strong>previousAndNext</strong>: Enable/Disable previous and next links</li>
</ul>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre><a class="line-num" href="#line-46" id="line-46">46</a>  <span class="nv">Dg.PagerView = </span><span class="nx">Dg</span><span class="p">.</span><span class="nx">DefaultItemView</span><span class="p">.</span><span class="nx">extend</span>
<a class="line-num" href="#line-47" id="line-47">47</a>    <span class="nv">optionNames: </span><span class="p">[</span><span class="s">&#39;deltaPage&#39;</span><span class="p">,</span> <span class="s">&#39;css&#39;</span><span class="p">,</span> <span class="s">&#39;texts&#39;</span><span class="p">,</span> <span class="s">&#39;numbers&#39;</span><span class="p">,</span> <span class="s">&#39;firstAndLast&#39;</span><span class="p">,</span> <span class="s">&#39;previousAndNext&#39;</span><span class="p">]</span>
<a class="line-num" href="#line-48" id="line-48">48</a>  
<a class="line-num" href="#line-49" id="line-49">49</a>    <span class="nv">template: </span><span class="nx">templates</span><span class="p">[</span><span class="s">&#39;pager&#39;</span><span class="p">]</span>
<a class="line-num" href="#line-50" id="line-50">50</a>  
<a class="line-num" href="#line-51" id="line-51">51</a>    <span class="nv">events:</span>
<a class="line-num" href="#line-52" id="line-52">52</a>      <span class="s">&#39;click a&#39;</span><span class="o">:</span> <span class="s">&#39;pagging&#39;</span>
<a class="line-num" href="#line-53" id="line-53">53</a>  
<a class="line-num" href="#line-54" id="line-54">54</a>  
<a class="line-num" href="#line-55" id="line-55">55</a>  </pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-2" id="section-2">&#182;</a>
</div>
<p>Define the default value for the number of links shown before
and after the active link</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre><a class="line-num" href="#line-56" id="line-56">56</a>  
<a class="line-num" href="#line-57" id="line-57">57</a>    <span class="nv">deltaPage: </span><span class="mi">2</span>
<a class="line-num" href="#line-58" id="line-58">58</a>  
<a class="line-num" href="#line-59" id="line-59">59</a>  
<a class="line-num" href="#line-60" id="line-60">60</a>  </pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-3" id="section-3">&#182;</a>
</div>
<p>Show the numbers by default</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre><a class="line-num" href="#line-59" id="line-59">59</a>  
<a class="line-num" href="#line-60" id="line-60">60</a>    <span class="nv">numbers: </span><span class="kc">true</span>
<a class="line-num" href="#line-61" id="line-61">61</a>  
<a class="line-num" href="#line-62" id="line-62">62</a>  
<a class="line-num" href="#line-63" id="line-63">63</a>  </pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-4" id="section-4">&#182;</a>
</div>
<p>Show the first and last links by default</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre><a class="line-num" href="#line-62" id="line-62">62</a>  
<a class="line-num" href="#line-63" id="line-63">63</a>    <span class="nv">firstAndLast: </span><span class="kc">true</span>
<a class="line-num" href="#line-64" id="line-64">64</a>  
<a class="line-num" href="#line-65" id="line-65">65</a>    <span class="nv">previousAndNext: </span><span class="kc">true</span>
<a class="line-num" href="#line-66" id="line-66">66</a>  
<a class="line-num" href="#line-67" id="line-67">67</a>  
<a class="line-num" href="#line-68" id="line-68">68</a>  </pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-5" id="section-5">&#182;</a>
</div>
<p>Define the defaults CSS styles if part or none are provided</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre><a class="line-num" href="#line-67" id="line-67">67</a>  
<a class="line-num" href="#line-68" id="line-68">68</a>    <span class="nv">css:</span>
<a class="line-num" href="#line-69" id="line-69">69</a>      <span class="nv">active: </span><span class="s">&#39;active&#39;</span>
<a class="line-num" href="#line-70" id="line-70">70</a>      <span class="nv">disabled: </span><span class="s">&#39;disabled&#39;</span>
<a class="line-num" href="#line-71" id="line-71">71</a>      <span class="nv">page: </span><span class="s">&#39;page&#39;</span>
<a class="line-num" href="#line-72" id="line-72">72</a>  
<a class="line-num" href="#line-73" id="line-73">73</a>  
<a class="line-num" href="#line-74" id="line-74">74</a>  </pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-6" id="section-6">&#182;</a>
</div>
<p>Define the texts if none are provided. Use I18n-js if defined</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre><a class="line-num" href="#line-73" id="line-73">73</a>  
<a class="line-num" href="#line-74" id="line-74">74</a>    <span class="nv">texts: </span><span class="nf">-&gt;</span>
<a class="line-num" href="#line-75" id="line-75">75</a>      <span class="k">if</span> <span class="nx">isI18n</span><span class="p">()</span>
<a class="line-num" href="#line-76" id="line-76">76</a>        <span class="k">return</span> <span class="p">{</span>
<a class="line-num" href="#line-77" id="line-77">77</a>          <span class="nv">first: </span><span class="nx">I18n</span><span class="p">.</span><span class="nx">t</span> <span class="nx">i18nKeys</span><span class="p">.</span><span class="nx">pager</span><span class="p">.</span><span class="nx">first</span>
<a class="line-num" href="#line-78" id="line-78">78</a>          <span class="nv">previous: </span><span class="nx">I18n</span><span class="p">.</span><span class="nx">t</span> <span class="nx">i18nKeys</span><span class="p">.</span><span class="nx">pager</span><span class="p">.</span><span class="nx">previous</span>
<a class="line-num" href="#line-79" id="line-79">79</a>          <span class="nv">next: </span><span class="nx">I18n</span><span class="p">.</span><span class="nx">t</span> <span class="nx">i18nKeys</span><span class="p">.</span><span class="nx">pager</span><span class="p">.</span><span class="nx">next</span>
<a class="line-num" href="#line-80" id="line-80">80</a>          <span class="nv">last: </span><span class="nx">I18n</span><span class="p">.</span><span class="nx">t</span> <span class="nx">i18nKeys</span><span class="p">.</span><span class="nx">pager</span><span class="p">.</span><span class="nx">last</span>
<a class="line-num" href="#line-81" id="line-81">81</a>          <span class="nv">filler: </span><span class="nx">I18n</span><span class="p">.</span><span class="nx">t</span> <span class="nx">i18nKeys</span><span class="p">.</span><span class="nx">pager</span><span class="p">.</span><span class="nx">filler</span>
<a class="line-num" href="#line-82" id="line-82">82</a>        <span class="p">}</span>
<a class="line-num" href="#line-83" id="line-83">83</a>      <span class="k">else</span>
<a class="line-num" href="#line-84" id="line-84">84</a>        <span class="k">return</span> <span class="p">{</span>
<a class="line-num" href="#line-85" id="line-85">85</a>          <span class="nv">first: </span><span class="s">&#39;&lt;&lt;&#39;</span>
<a class="line-num" href="#line-86" id="line-86">86</a>          <span class="nv">previous: </span><span class="s">&#39;&lt;&#39;</span>
<a class="line-num" href="#line-87" id="line-87">87</a>          <span class="nv">next: </span><span class="s">&#39;&gt;&#39;</span>
<a class="line-num" href="#line-88" id="line-88">88</a>          <span class="nv">last: </span><span class="s">&#39;&gt;&gt;&#39;</span>
<a class="line-num" href="#line-89" id="line-89">89</a>          <span class="nv">filler: </span><span class="s">&#39;...&#39;</span>
<a class="line-num" href="#line-90" id="line-90">90</a>        <span class="p">}</span>
<a class="line-num" href="#line-91" id="line-91">91</a>  
<a class="line-num" href="#line-92" id="line-92">92</a>  
<a class="line-num" href="#line-93" id="line-93">93</a>  </pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-7" id="section-7">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Constructor</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre><a class="line-num" href="#line-94" id="line-94">94</a>  
<a class="line-num" href="#line-95" id="line-95">95</a>    <span class="nv">constructor: </span><span class="nf">(options) -&gt;</span>
<a class="line-num" href="#line-96" id="line-96">96</a>      <span class="nx">Dg</span><span class="p">.</span><span class="nx">DefaultItemView</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">constructor</span><span class="p">.</span><span class="nx">apply</span> <span class="nx">@</span><span class="p">,</span> <span class="nx">slice</span><span class="p">(</span><span class="nx">arguments</span><span class="p">)</span>
<a class="line-num" href="#line-97" id="line-97">97</a>  
<a class="line-num" href="#line-98" id="line-98">98</a>  
<a class="line-num" href="#line-99" id="line-99">99</a>  </pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-8" id="section-8">&#182;</a>
</div>
<p>Define default values for rendering when no info available</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre><a class="line-num" href="#line-98" id="line-98">98</a>  
<a class="line-num" href="#line-99" id="line-99">99</a>      <span class="vi">@info = </span><span class="p">{}</span>
<a class="line-num" href="#line-100" id="line-100">100</a>      <span class="nx">@info</span><span class="p">[</span><span class="nx">infoKeys</span><span class="p">.</span><span class="nx">page</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
<a class="line-num" href="#line-101" id="line-101">101</a>      <span class="nx">@info</span><span class="p">[</span><span class="nx">infoKeys</span><span class="p">.</span><span class="nx">pages</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
<a class="line-num" href="#line-102" id="line-102">102</a>  
<a class="line-num" href="#line-103" id="line-103">103</a>  
<a class="line-num" href="#line-104" id="line-104">104</a>  </pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-9" id="section-9">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Render the pager component based on the metadata given. Calculation
is done to know how to render the actual page, first/last, next/previous
links.</p>
  </div>
  <div class="body"><p>The pagger is done through a list of element:</p>

<div class='highlight'><pre><code language=''>&lt;ul&gt;
&lt;li&gt;&lt;a href="..."&gt;...&lt;/a&gt;&lt;/li&gt;
...
&lt;/ul&gt;
</code></pre></div>
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">info</span>
      <span class="dox_type">Object</span>
      <span>The metadata to get the pagging data</span>
    </div>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre><a class="line-num" href="#line-117" id="line-117">117</a>  
<a class="line-num" href="#line-118" id="line-118">118</a>    <span class="nv">refreshView: </span><span class="nf">(info) -&gt;</span>
<a class="line-num" href="#line-119" id="line-119">119</a>  
<a class="line-num" href="#line-120" id="line-120">120</a>  </pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-10" id="section-10">&#182;</a>
</div>
<p>Keep the metadata</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre><a class="line-num" href="#line-119" id="line-119">119</a>  
<a class="line-num" href="#line-120" id="line-120">120</a>      <span class="vi">@info = </span><span class="nx">info</span>
<a class="line-num" href="#line-121" id="line-121">121</a>  
<a class="line-num" href="#line-122" id="line-122">122</a>  
<a class="line-num" href="#line-123" id="line-123">123</a>  </pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-11" id="section-11">&#182;</a>
</div>
<p>Reset el</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre><a class="line-num" href="#line-122" id="line-122">122</a>  
<a class="line-num" href="#line-123" id="line-123">123</a>      <span class="nx">@$el</span><span class="p">.</span><span class="nx">empty</span><span class="p">().</span><span class="nx">hide</span><span class="p">()</span>
<a class="line-num" href="#line-124" id="line-124">124</a>  
<a class="line-num" href="#line-125" id="line-125">125</a>      <span class="nv">ul = </span><span class="nx">$</span><span class="p">(</span><span class="s">&#39;&lt;ul class=&quot;pagination pagination-right&quot; /&gt;&#39;</span><span class="p">)</span>
<a class="line-num" href="#line-126" id="line-126">126</a>  
<a class="line-num" href="#line-127" id="line-127">127</a>  
<a class="line-num" href="#line-128" id="line-128">128</a>  </pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-12" id="section-12">&#182;</a>
</div>
<p>Shortcuts to number of pages and current page</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre><a class="line-num" href="#line-127" id="line-127">127</a>  
<a class="line-num" href="#line-128" id="line-128">128</a>      <span class="nv">page = </span><span class="nx">@info</span><span class="p">[</span><span class="nx">infoKeys</span><span class="p">.</span><span class="nx">page</span><span class="p">]</span>
<a class="line-num" href="#line-129" id="line-129">129</a>      <span class="nv">pages = </span><span class="nx">@info</span><span class="p">[</span><span class="nx">infoKeys</span><span class="p">.</span><span class="nx">pages</span><span class="p">]</span>
<a class="line-num" href="#line-130" id="line-130">130</a>  
<a class="line-num" href="#line-131" id="line-131">131</a>  
<a class="line-num" href="#line-132" id="line-132">132</a>  </pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-13" id="section-13">&#182;</a>
</div>
<p>Check if there is something to render</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre><a class="line-num" href="#line-131" id="line-131">131</a>  
<a class="line-num" href="#line-132" id="line-132">132</a>      <span class="k">if</span> <span class="nx">page</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">and</span> <span class="nx">pages</span> <span class="o">&gt;</span> <span class="mi">1</span>
<a class="line-num" href="#line-133" id="line-133">133</a>        <span class="nv">i18n = </span><span class="nx">_</span><span class="p">.</span><span class="nx">result</span><span class="p">(</span><span class="nx">@</span><span class="p">,</span> <span class="s">&#39;texts&#39;</span><span class="p">)</span>
<a class="line-num" href="#line-134" id="line-134">134</a>  
<a class="line-num" href="#line-135" id="line-135">135</a>  
<a class="line-num" href="#line-136" id="line-136">136</a>  </pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-14" id="section-14">&#182;</a>
</div>
<p>Calculate the bounds</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre><a class="line-num" href="#line-135" id="line-135">135</a>  
<a class="line-num" href="#line-136" id="line-136">136</a>        <span class="nv">minPage = </span><span class="nx">page</span> <span class="o">-</span> <span class="nx">@deltaPage</span>
<a class="line-num" href="#line-137" id="line-137">137</a>        <span class="nv">maxPage = </span><span class="nx">page</span> <span class="o">+</span> <span class="nx">@deltaPage</span>
<a class="line-num" href="#line-138" id="line-138">138</a>  
<a class="line-num" href="#line-139" id="line-139">139</a>  
<a class="line-num" href="#line-140" id="line-140">140</a>  </pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-15" id="section-15">&#182;</a>
</div>
<p>Correct the overflows of the bounds</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre><a class="line-num" href="#line-139" id="line-139">139</a>  
<a class="line-num" href="#line-140" id="line-140">140</a>        <span class="nv">minPage = </span><span class="mi">1</span> <span class="k">if</span> <span class="nx">minPage</span> <span class="o">&lt;=</span> <span class="mi">0</span>
<a class="line-num" href="#line-141" id="line-141">141</a>        <span class="nv">maxPage = </span><span class="nx">pages</span> <span class="k">if</span> <span class="nx">maxPage</span> <span class="o">&gt;=</span> <span class="nx">pages</span>
<a class="line-num" href="#line-142" id="line-142">142</a>  
<a class="line-num" href="#line-143" id="line-143">143</a>  
<a class="line-num" href="#line-144" id="line-144">144</a>  </pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-16" id="section-16">&#182;</a>
</div>
<p>Create first and previous links</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre><a class="line-num" href="#line-143" id="line-143">143</a>  
<a class="line-num" href="#line-144" id="line-144">144</a>        <span class="nv">state = </span><span class="k">if</span> <span class="nx">page</span> <span class="o">==</span> <span class="mi">1</span> <span class="k">then</span> <span class="nx">@css</span><span class="p">.</span><span class="nx">disabled</span> <span class="k">else</span> <span class="s">&#39;&#39;</span>
<a class="line-num" href="#line-145" id="line-145">145</a>        <span class="nx">ul</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="nx">@_createLink</span> <span class="nx">i18n</span><span class="p">.</span><span class="nx">first</span><span class="p">,</span> <span class="s">&#39;f&#39;</span><span class="p">,</span> <span class="nx">state</span><span class="p">)</span> <span class="k">if</span> <span class="nx">@firstAndLast</span>
<a class="line-num" href="#line-146" id="line-146">146</a>        <span class="nx">ul</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="nx">@_createLink</span> <span class="nx">i18n</span><span class="p">.</span><span class="nx">previous</span><span class="p">,</span> <span class="s">&#39;p&#39;</span><span class="p">,</span> <span class="nx">state</span><span class="p">)</span> <span class="k">if</span> <span class="nx">@previousAndNext</span>
<a class="line-num" href="#line-147" id="line-147">147</a>  
<a class="line-num" href="#line-148" id="line-148">148</a>  
<a class="line-num" href="#line-149" id="line-149">149</a>  </pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-17" id="section-17">&#182;</a>
</div>
<p>If number must be shown</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre><a class="line-num" href="#line-148" id="line-148">148</a>  
<a class="line-num" href="#line-149" id="line-149">149</a>        <span class="k">if</span> <span class="nx">@numbers</span>
<a class="line-num" href="#line-150" id="line-150">150</a>  
<a class="line-num" href="#line-151" id="line-151">151</a>  </pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-18" id="section-18">&#182;</a>
</div>
<p>Create filler</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre><a class="line-num" href="#line-150" id="line-150">150</a>  
<a class="line-num" href="#line-151" id="line-151">151</a>          <span class="nx">ul</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="nx">@_createLink</span> <span class="nx">i18n</span><span class="p">.</span><span class="nx">filler</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">,</span> <span class="nx">@css</span><span class="p">.</span><span class="nx">disabled</span><span class="p">)</span> <span class="k">if</span> <span class="nx">minPage</span> <span class="o">&gt;</span> <span class="mi">1</span>
<a class="line-num" href="#line-152" id="line-152">152</a>  
<a class="line-num" href="#line-153" id="line-153">153</a>  
<a class="line-num" href="#line-154" id="line-154">154</a>  </pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-19" id="section-19">&#182;</a>
</div>
<p>Create page links</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre><a class="line-num" href="#line-153" id="line-153">153</a>  
<a class="line-num" href="#line-154" id="line-154">154</a>          <span class="k">for</span> <span class="nx">i</span> <span class="k">in</span> <span class="p">[</span><span class="nx">minPage</span><span class="p">..</span><span class="nx">maxPage</span><span class="p">]</span>
<a class="line-num" href="#line-155" id="line-155">155</a>            <span class="nv">css = </span><span class="k">if</span> <span class="nx">i</span> <span class="o">==</span> <span class="nx">page</span> <span class="k">then</span> <span class="nx">@css</span><span class="p">.</span><span class="nx">active</span> <span class="k">else</span> <span class="s">&#39;&#39;</span>
<a class="line-num" href="#line-156" id="line-156">156</a>            <span class="nx">ul</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="nx">@_createLink</span> <span class="s">&quot;</span><span class="si">#{</span><span class="nx">i</span><span class="si">}</span><span class="s">&quot;</span><span class="p">,</span> <span class="s">&#39;page&#39;</span><span class="p">,</span> <span class="nx">css</span><span class="p">)</span>
<a class="line-num" href="#line-157" id="line-157">157</a>  
<a class="line-num" href="#line-158" id="line-158">158</a>  
<a class="line-num" href="#line-159" id="line-159">159</a>  </pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-20" id="section-20">&#182;</a>
</div>
<p>Create filler</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre><a class="line-num" href="#line-158" id="line-158">158</a>  
<a class="line-num" href="#line-159" id="line-159">159</a>          <span class="nx">ul</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="nx">@_createLink</span> <span class="nx">i18n</span><span class="p">.</span><span class="nx">filler</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">,</span> <span class="nx">@css</span><span class="p">.</span><span class="nx">disabled</span><span class="p">)</span> <span class="k">if</span> <span class="nx">maxPage</span> <span class="o">&lt;</span> <span class="nx">pages</span>
<a class="line-num" href="#line-160" id="line-160">160</a>  
<a class="line-num" href="#line-161" id="line-161">161</a>  
<a class="line-num" href="#line-162" id="line-162">162</a>  </pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-21" id="section-21">&#182;</a>
</div>
<p>Create last and next links</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre><a class="line-num" href="#line-161" id="line-161">161</a>  
<a class="line-num" href="#line-162" id="line-162">162</a>        <span class="nv">state = </span><span class="k">if</span> <span class="nx">page</span> <span class="o">==</span> <span class="nx">pages</span> <span class="k">then</span> <span class="nx">@css</span><span class="p">.</span><span class="nx">disabled</span> <span class="k">else</span> <span class="s">&#39;&#39;</span>
<a class="line-num" href="#line-163" id="line-163">163</a>        <span class="nx">ul</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="nx">@_createLink</span> <span class="nx">i18n</span><span class="p">.</span><span class="nx">next</span><span class="p">,</span> <span class="s">&#39;n&#39;</span><span class="p">,</span> <span class="nx">state</span><span class="p">)</span> <span class="k">if</span> <span class="nx">@previousAndNext</span>
<a class="line-num" href="#line-164" id="line-164">164</a>        <span class="nx">ul</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="nx">@_createLink</span> <span class="nx">i18n</span><span class="p">.</span><span class="nx">last</span><span class="p">,</span> <span class="s">&#39;l&#39;</span><span class="p">,</span> <span class="nx">state</span><span class="p">)</span> <span class="k">if</span> <span class="nx">@firstAndLast</span>
<a class="line-num" href="#line-165" id="line-165">165</a>  
<a class="line-num" href="#line-166" id="line-166">166</a>        <span class="nx">@$el</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="nx">ul</span><span class="p">).</span><span class="nx">show</span><span class="p">()</span>
<a class="line-num" href="#line-167" id="line-167">167</a>  
<a class="line-num" href="#line-168" id="line-168">168</a>  
<a class="line-num" href="#line-169" id="line-169">169</a>  </pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-22" id="section-22">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Manage the clicks done on any button of the pager</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">event</span>
      <span class="dox_type">Event</span>
      <span>Pager button click event</span>
    </div>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre><a class="line-num" href="#line-172" id="line-172">172</a>  
<a class="line-num" href="#line-173" id="line-173">173</a>    <span class="nv">pagging: </span><span class="nf">(event) -&gt;</span>
<a class="line-num" href="#line-174" id="line-174">174</a>      <span class="nx">event</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">()</span>
<a class="line-num" href="#line-175" id="line-175">175</a>  
<a class="line-num" href="#line-176" id="line-176">176</a>      <span class="nv">target = </span><span class="nx">$</span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">)</span>
<a class="line-num" href="#line-177" id="line-177">177</a>  
<a class="line-num" href="#line-178" id="line-178">178</a>  
<a class="line-num" href="#line-179" id="line-179">179</a>  </pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-23" id="section-23">&#182;</a>
</div>
<p>Check if clickable</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre><a class="line-num" href="#line-178" id="line-178">178</a>  
<a class="line-num" href="#line-179" id="line-179">179</a>      <span class="k">unless</span> <span class="nx">target</span><span class="p">.</span><span class="nx">parent</span><span class="p">().</span><span class="nx">hasClass</span><span class="p">(</span><span class="nx">@css</span><span class="p">.</span><span class="nx">disabled</span><span class="p">)</span> <span class="o">or</span> <span class="nx">target</span><span class="p">.</span><span class="nx">parent</span><span class="p">().</span><span class="nx">hasClass</span><span class="p">(</span><span class="nx">@css</span><span class="p">.</span><span class="nx">active</span><span class="p">)</span>
<a class="line-num" href="#line-180" id="line-180">180</a>  
<a class="line-num" href="#line-181" id="line-181">181</a>  </pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-24" id="section-24">&#182;</a>
</div>
<p>Retrieve the type of page link clicked</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre><a class="line-num" href="#line-180" id="line-180">180</a>  
<a class="line-num" href="#line-181" id="line-181">181</a>        <span class="nv">type = </span><span class="nx">target</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="s">&#39;type&#39;</span><span class="p">)</span>
<a class="line-num" href="#line-182" id="line-182">182</a>  
<a class="line-num" href="#line-183" id="line-183">183</a>  
<a class="line-num" href="#line-184" id="line-184">184</a>  </pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-25" id="section-25">&#182;</a>
</div>
<p>Calculate the correct page</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre><a class="line-num" href="#line-183" id="line-183">183</a>  
<a class="line-num" href="#line-184" id="line-184">184</a>        <span class="k">switch</span> <span class="nx">type</span>
<a class="line-num" href="#line-185" id="line-185">185</a>  
<a class="line-num" href="#line-186" id="line-186">186</a>  </pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-26" id="section-26">&#182;</a>
</div>
<p>First page</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre><a class="line-num" href="#line-185" id="line-185">185</a>  
<a class="line-num" href="#line-186" id="line-186">186</a>          <span class="k">when</span> <span class="s">&#39;f&#39;</span>
<a class="line-num" href="#line-187" id="line-187">187</a>            <span class="nv">page = </span><span class="mi">1</span>
<a class="line-num" href="#line-188" id="line-188">188</a>  
<a class="line-num" href="#line-189" id="line-189">189</a>  
<a class="line-num" href="#line-190" id="line-190">190</a>  </pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-27" id="section-27">&#182;</a>
</div>
<p>Previous page</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre><a class="line-num" href="#line-189" id="line-189">189</a>  
<a class="line-num" href="#line-190" id="line-190">190</a>          <span class="k">when</span> <span class="s">&#39;p&#39;</span>
<a class="line-num" href="#line-191" id="line-191">191</a>            <span class="k">if</span> <span class="nx">@info</span><span class="p">[</span><span class="nx">infoKeys</span><span class="p">.</span><span class="nx">page</span><span class="p">]</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">&gt;</span> <span class="mi">0</span>
<a class="line-num" href="#line-192" id="line-192">192</a>              <span class="nv">page = </span><span class="nx">@info</span><span class="p">[</span><span class="nx">infoKeys</span><span class="p">.</span><span class="nx">page</span><span class="p">]</span> <span class="o">-</span> <span class="mi">1</span>
<a class="line-num" href="#line-193" id="line-193">193</a>            <span class="k">else</span>
<a class="line-num" href="#line-194" id="line-194">194</a>              <span class="nv">page = </span><span class="nx">@info</span><span class="p">[</span><span class="nx">infoKeys</span><span class="p">.</span><span class="nx">page</span><span class="p">]</span>
<a class="line-num" href="#line-195" id="line-195">195</a>  
<a class="line-num" href="#line-196" id="line-196">196</a>  
<a class="line-num" href="#line-197" id="line-197">197</a>  </pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-28" id="section-28">&#182;</a>
</div>
<p>Next page</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre><a class="line-num" href="#line-196" id="line-196">196</a>  
<a class="line-num" href="#line-197" id="line-197">197</a>          <span class="k">when</span> <span class="s">&#39;n&#39;</span>
<a class="line-num" href="#line-198" id="line-198">198</a>            <span class="k">if</span> <span class="p">(</span><span class="nx">@info</span><span class="p">[</span><span class="nx">infoKeys</span><span class="p">.</span><span class="nx">page</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">&lt;</span> <span class="nx">@info</span><span class="p">[</span><span class="nx">infoKeys</span><span class="p">.</span><span class="nx">pages</span><span class="p">]</span>
<a class="line-num" href="#line-199" id="line-199">199</a>              <span class="nv">page = </span><span class="nx">@info</span><span class="p">[</span><span class="nx">infoKeys</span><span class="p">.</span><span class="nx">page</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span>
<a class="line-num" href="#line-200" id="line-200">200</a>            <span class="k">else</span>
<a class="line-num" href="#line-201" id="line-201">201</a>              <span class="nv">page = </span><span class="nx">@info</span><span class="p">[</span><span class="nx">infoKeys</span><span class="p">.</span><span class="nx">pages</span><span class="p">]</span>
<a class="line-num" href="#line-202" id="line-202">202</a>  
<a class="line-num" href="#line-203" id="line-203">203</a>  
<a class="line-num" href="#line-204" id="line-204">204</a>  </pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-29" id="section-29">&#182;</a>
</div>
<p>Last page</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre><a class="line-num" href="#line-203" id="line-203">203</a>  
<a class="line-num" href="#line-204" id="line-204">204</a>          <span class="k">when</span> <span class="s">&#39;l&#39;</span>
<a class="line-num" href="#line-205" id="line-205">205</a>            <span class="nv">page = </span><span class="nx">@info</span><span class="p">[</span><span class="nx">infoKeys</span><span class="p">.</span><span class="nx">pages</span><span class="p">]</span>
<a class="line-num" href="#line-206" id="line-206">206</a>  
<a class="line-num" href="#line-207" id="line-207">207</a>  
<a class="line-num" href="#line-208" id="line-208">208</a>  </pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-30" id="section-30">&#182;</a>
</div>
<p>Specific page</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre><a class="line-num" href="#line-207" id="line-207">207</a>  
<a class="line-num" href="#line-208" id="line-208">208</a>          <span class="k">else</span>
<a class="line-num" href="#line-209" id="line-209">209</a>            <span class="nv">page = </span><span class="nb">parseInt</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">).</span><span class="nx">text</span><span class="p">())</span>
<a class="line-num" href="#line-210" id="line-210">210</a>  
<a class="line-num" href="#line-211" id="line-211">211</a>  
<a class="line-num" href="#line-212" id="line-212">212</a>  </pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-31" id="section-31">&#182;</a>
</div>
<p>Update the collection only if required</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre><a class="line-num" href="#line-211" id="line-211">211</a>  
<a class="line-num" href="#line-212" id="line-212">212</a>        <span class="nx">@update</span> <span class="nx">_</span><span class="p">.</span><span class="nx">object</span><span class="p">(</span> <span class="p">[</span><span class="nx">infoKeys</span><span class="p">.</span><span class="nx">page</span><span class="p">],</span> <span class="p">[</span><span class="nx">page</span><span class="p">]</span> <span class="p">)</span> <span class="k">if</span> <span class="nx">page</span> <span class="o">!=</span> <span class="nx">@info</span><span class="p">[</span><span class="nx">infoKeys</span><span class="p">.</span><span class="nx">page</span><span class="p">]</span>
<a class="line-num" href="#line-213" id="line-213">213</a>  
<a class="line-num" href="#line-214" id="line-214">214</a>  
<a class="line-num" href="#line-215" id="line-215">215</a>  </pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-32" id="section-32">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Create a link for one element in the pager.</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">text</span>
      <span class="dox_type">String</span>
      <span>The text shown to the user</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">type</span>
      <span class="dox_type">String</span>
      <span>The type of link</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">state</span>
      <span class="dox_type">String</span>
      <span>The state of the link</span>
    </div>
    <div class="dox_tag_title">Returns</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name"></span>
      <span class="dox_type">jQueryObject</span>
      <span>Link element is wrapped into a <code>li</code> tag</span>
    </div>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre><a class="line-num" href="#line-221" id="line-221">221</a>  
<a class="line-num" href="#line-222" id="line-222">222</a>    <span class="nv">_createLink: </span><span class="nf">(text, type, state) -&gt;</span>
<a class="line-num" href="#line-223" id="line-223">223</a>      <span class="nv">a = </span><span class="nx">$</span><span class="p">(</span><span class="s">&#39;&lt;a/&gt;&#39;</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s">&#39;href&#39;</span><span class="p">,</span> <span class="s">&#39;#&#39;</span><span class="p">).</span><span class="nx">data</span><span class="p">(</span><span class="s">&#39;type&#39;</span><span class="p">,</span> <span class="nx">type</span><span class="p">).</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">@css</span><span class="p">.</span><span class="nx">page</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="s">&quot;</span><span class="si">#{</span><span class="nx">text</span><span class="si">}</span><span class="s">&quot;</span><span class="p">)</span>
<a class="line-num" href="#line-224" id="line-224">224</a>      <span class="nv">li = </span><span class="nx">$</span><span class="p">(</span><span class="s">&#39;&lt;li /&gt;&#39;</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span>
<a class="line-num" href="#line-225" id="line-225">225</a>      <span class="nx">li</span><span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">state</span><span class="p">)</span> <span class="k">if</span> <span class="nx">state</span>
<a class="line-num" href="#line-226" id="line-226">226</a>      <span class="k">return</span> <span class="nx">li</span>
<a class="line-num" href="#line-227" id="line-227">227</a>  </pre></div>
        </td>
      </tr>
  </tbody>
</table>
  </div>
</body>
</html>
